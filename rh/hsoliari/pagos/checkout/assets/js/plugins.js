/*!
 * pickadate.js v3.5.6, 2015/04/20
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */
!function(a){"function"==typeof define&&define.amd?define("picker",["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):this.Picker=a(jQuery)}(function(a){function b(f,g,i,m){function n(){return b._.node("div",b._.node("div",b._.node("div",b._.node("div",B.component.nodes(w.open),y.box),y.wrap),y.frame),y.holder,'tabindex="-1"')}function o(){z.data(g,B).addClass(y.input).val(z.data("value")?B.get("select",x.format):f.value),x.editable||z.on("focus."+w.id+" click."+w.id,function(a){a.preventDefault(),B.open()}).on("keydown."+w.id,u),e(f,{haspopup:!0,expanded:!1,readonly:!1,owns:f.id+"_root"})}function p(){e(B.$root[0],"hidden",!0)}function q(){B.$holder.on({keydown:u,"focus.toOpen":t,blur:function(){z.removeClass(y.target)},focusin:function(a){B.$root.removeClass(y.focused),a.stopPropagation()},"mousedown click":function(b){var c=b.target;c!=B.$holder[0]&&(b.stopPropagation(),"mousedown"!=b.type||a(c).is("input, select, textarea, button, option")||(b.preventDefault(),B.$holder[0].focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var b=a(this),c=b.data(),d=b.hasClass(y.navDisabled)||b.hasClass(y.disabled),e=h();e=e&&(e.type||e.href),(d||e&&!a.contains(B.$root[0],e))&&B.$holder[0].focus(),!d&&c.nav?B.set("highlight",B.component.item.highlight,{nav:c.nav}):!d&&"pick"in c?(B.set("select",c.pick),x.closeOnSelect&&B.close(!0)):c.clear?(B.clear(),x.closeOnClear&&B.close(!0)):c.close&&B.close(!0)})}function r(){var b;x.hiddenName===!0?(b=f.name,f.name=""):(b=["string"==typeof x.hiddenPrefix?x.hiddenPrefix:"","string"==typeof x.hiddenSuffix?x.hiddenSuffix:"_submit"],b=b[0]+f.name+b[1]),B._hidden=a('<input type=hidden name="'+b+'"'+(z.data("value")||f.value?' value="'+B.get("select",x.formatSubmit)+'"':"")+">")[0],z.on("change."+w.id,function(){B._hidden.value=f.value?B.get("select",x.formatSubmit):""})}function s(){v&&l?B.$holder.find("."+y.frame).one("transitionend",function(){B.$holder[0].focus()}):B.$holder[0].focus()}function t(a){a.stopPropagation(),z.addClass(y.target),B.$root.addClass(y.focused),B.open()}function u(a){var b=a.keyCode,c=/^(8|46)$/.test(b);return 27==b?(B.close(!0),!1):void((32==b||c||!w.open&&B.component.key[b])&&(a.preventDefault(),a.stopPropagation(),c?B.clear().close():B.open()))}if(!f)return b;var v=!1,w={id:f.id||"P"+Math.abs(~~(Math.random()*new Date))},x=i?a.extend(!0,{},i.defaults,m):m||{},y=a.extend({},b.klasses(),x.klass),z=a(f),A=function(){return this.start()},B=A.prototype={constructor:A,$node:z,start:function(){return w&&w.start?B:(w.methods={},w.start=!0,w.open=!1,w.type=f.type,f.autofocus=f==h(),f.readOnly=!x.editable,f.id=f.id||w.id,"text"!=f.type&&(f.type="text"),B.component=new i(B,x),B.$root=a('<div class="'+y.picker+'" id="'+f.id+'_root" />'),p(),B.$holder=a(n()).appendTo(B.$root),q(),x.formatSubmit&&r(),o(),x.containerHidden?a(x.containerHidden).append(B._hidden):z.after(B._hidden),x.container?a(x.container).append(B.$root):z.after(B.$root),B.on({start:B.component.onStart,render:B.component.onRender,stop:B.component.onStop,open:B.component.onOpen,close:B.component.onClose,set:B.component.onSet}).on({start:x.onStart,render:x.onRender,stop:x.onStop,open:x.onOpen,close:x.onClose,set:x.onSet}),v=c(B.$holder[0]),f.autofocus&&B.open(),B.trigger("start").trigger("render"))},render:function(b){return b?(B.$holder=a(n()),q(),B.$root.html(B.$holder)):B.$root.find("."+y.box).html(B.component.nodes(w.open)),B.trigger("render")},stop:function(){return w.start?(B.close(),B._hidden&&B._hidden.parentNode.removeChild(B._hidden),B.$root.remove(),z.removeClass(y.input).removeData(g),setTimeout(function(){z.off("."+w.id)},0),f.type=w.type,f.readOnly=!1,B.trigger("stop"),w.methods={},w.start=!1,B):B},open:function(c){return w.open?B:(z.addClass(y.active),e(f,"expanded",!0),setTimeout(function(){B.$root.addClass(y.opened),e(B.$root[0],"hidden",!1)},0),c!==!1&&(w.open=!0,v&&k.css("overflow","hidden").css("padding-right","+="+d()),s(),j.on("click."+w.id+" focusin."+w.id,function(a){var b=a.target;b!=f&&b!=document&&3!=a.which&&B.close(b===B.$holder[0])}).on("keydown."+w.id,function(c){var d=c.keyCode,e=B.component.key[d],f=c.target;27==d?B.close(!0):f!=B.$holder[0]||!e&&13!=d?a.contains(B.$root[0],f)&&13==d&&(c.preventDefault(),f.click()):(c.preventDefault(),e?b._.trigger(B.component.key.go,B,[b._.trigger(e)]):B.$root.find("."+y.highlighted).hasClass(y.disabled)||(B.set("select",B.component.item.highlight),x.closeOnSelect&&B.close(!0)))})),B.trigger("open"))},close:function(a){return a&&(x.editable?f.focus():(B.$holder.off("focus.toOpen").focus(),setTimeout(function(){B.$holder.on("focus.toOpen",t)},0))),z.removeClass(y.active),e(f,"expanded",!1),setTimeout(function(){B.$root.removeClass(y.opened+" "+y.focused),e(B.$root[0],"hidden",!0)},0),w.open?(w.open=!1,v&&k.css("overflow","").css("padding-right","-="+d()),j.off("."+w.id),B.trigger("close")):B},clear:function(a){return B.set("clear",null,a)},set:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(d=g&&a.isPlainObject(c)?c:d||{},b){g||(h[b]=c);for(e in h)f=h[e],e in B.component.item&&(void 0===f&&(f=null),B.component.set(e,f,d)),("select"==e||"clear"==e)&&z.val("clear"==e?"":B.get(e,x.format)).trigger("change");B.render()}return d.muted?B:B.trigger("set",h)},get:function(a,c){if(a=a||"value",null!=w[a])return w[a];if("valueSubmit"==a){if(B._hidden)return B._hidden.value;a="value"}if("value"==a)return f.value;if(a in B.component.item){if("string"==typeof c){var d=B.component.get(a);return d?b._.trigger(B.component.formats.toString,B.component,[c,d]):""}return B.component.get(a)}},on:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(b){g||(h[b]=c);for(e in h)f=h[e],d&&(e="_"+e),w.methods[e]=w.methods[e]||[],w.methods[e].push(f)}return B},off:function(){var a,b,c=arguments;for(a=0,namesCount=c.length;a<namesCount;a+=1)b=c[a],b in w.methods&&delete w.methods[b];return B},trigger:function(a,c){var d=function(a){var d=w.methods[a];d&&d.map(function(a){b._.trigger(a,B,[c])})};return d("_"+a),d(a),B}};return new A}function c(a){var b,c="position";return a.currentStyle?b=a.currentStyle[c]:window.getComputedStyle&&(b=getComputedStyle(a)[c]),"fixed"==b}function d(){if(k.height()<=i.height())return 0;var b=a('<div style="visibility:hidden;width:100px" />').appendTo("body"),c=b[0].offsetWidth;b.css("overflow","scroll");var d=a('<div style="width:100%" />').appendTo(b),e=d[0].offsetWidth;return b.remove(),c-e}function e(b,c,d){if(a.isPlainObject(c))for(var e in c)f(b,e,c[e]);else f(b,c,d)}function f(a,b,c){a.setAttribute(("role"==b?"":"aria-")+b,c)}function g(b,c){a.isPlainObject(b)||(b={attribute:c}),c="";for(var d in b){var e=("role"==d?"":"aria-")+d,f=b[d];c+=null==f?"":e+'="'+b[d]+'"'}return c}function h(){try{return document.activeElement}catch(a){}}var i=a(window),j=a(document),k=a(document.documentElement),l=null!=document.documentElement.style.transition;return b.klasses=function(a){return a=a||"picker",{picker:a,opened:a+"--opened",focused:a+"--focused",input:a+"__input",active:a+"__input--active",target:a+"__input--target",holder:a+"__holder",frame:a+"__frame",wrap:a+"__wrap",box:a+"__box"}},b._={group:function(a){for(var c,d="",e=b._.trigger(a.min,a);e<=b._.trigger(a.max,a,[e]);e+=a.i)c=b._.trigger(a.item,a,[e]),d+=b._.node(a.node,c[0],c[1],c[2]);return d},node:function(b,c,d,e){return c?(c=a.isArray(c)?c.join(""):c,d=d?' class="'+d+'"':"",e=e?" "+e:"","<"+b+d+e+">"+c+"</"+b+">"):""},lead:function(a){return(10>a?"0":"")+a},trigger:function(a,b,c){return"function"==typeof a?a.apply(b,c||[]):a},digits:function(a){return/\d/.test(a[1])?2:1},isDate:function(a){return{}.toString.call(a).indexOf("Date")>-1&&this.isInteger(a.getDate())},isInteger:function(a){return{}.toString.call(a).indexOf("Number")>-1&&a%1===0},ariaAttr:g},b.extend=function(c,d){a.fn[c]=function(e,f){var g=this.data(c);return"picker"==e?g:g&&"string"==typeof e?b._.trigger(g[e],g,[f]):this.each(function(){var f=a(this);f.data(c)||new b(this,c,d,e)})},a.fn[c].defaults=d.defaults},b});



/*!
 * Date picker for pickadate.js v3.5.6
 * http://amsul.github.io/pickadate.js/date.htm
 */
!function(a){"function"==typeof define&&define.amd?define(["picker","jquery"],a):"object"==typeof exports?module.exports=a(require("./picker.js"),require("jquery")):a(Picker,jQuery)}(function(a,b){function c(a,b){var c=this,d=a.$node[0],e=d.value,f=a.$node.data("value"),g=f||e,h=f?b.formatSubmit:b.format,i=function(){return d.currentStyle?"rtl"==d.currentStyle.direction:"rtl"==getComputedStyle(a.$root[0]).direction};c.settings=b,c.$node=a.$node,c.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},c.item={},c.item.clear=null,c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return a[0]===!0?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),g?c.set("select",g,{format:h,defaultValue:!0}):c.set("select",null).set("highlight",c.item.now),c.key={40:7,38:-7,39:function(){return i()?-1:1},37:function(){return i()?1:-1},go:function(a){var b=c.item.highlight,d=new Date(b.year,b.month,b.date+a);c.set("highlight",d,{interval:a}),this.render()}},a.on("render",function(){a.$root.find("."+b.klass.selectMonth).on("change",function(){var c=this.value;c&&(a.set("highlight",[a.get("view").year,c,a.get("highlight").date]),a.$root.find("."+b.klass.selectMonth).trigger("focus"))}),a.$root.find("."+b.klass.selectYear).on("change",function(){var c=this.value;c&&(a.set("highlight",[c,a.get("view").month,a.get("highlight").date]),a.$root.find("."+b.klass.selectYear).trigger("focus"))})},1).on("open",function(){var d="";c.disabled(c.get("now"))&&(d=":not(."+b.klass.buttonToday+")"),a.$root.find("button"+d+", select").attr("disabled",!1)},1).on("close",function(){a.$root.find("button, select").attr("disabled",!0)},1)}var d=7,e=6,f=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?("clear"==a&&(a="select"),e[a]=b,d):(e["enable"==a?"disable":"flip"==a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c)}).pop(),"select"==a?d.set("highlight",e.select,c):"highlight"==a?d.set("view",e.highlight,c):a.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&d.disabled(e.select)&&d.set("select",e.select,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",e.highlight,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,d){var e,g=this;return c=void 0===c?a:c,c==-(1/0)||c==1/0?e=c:b.isPlainObject(c)&&f.isInteger(c.pick)?c=c.obj:b.isArray(c)?(c=new Date(c[0],c[1],c[2]),c=f.isDate(c)?c:g.create().obj):c=f.isInteger(c)||f.isDate(c)?g.normalize(new Date(c),d):g.now(a,c,d),{year:e||c.getFullYear(),month:e||c.getMonth(),date:e||c.getDate(),day:e||c.getDay(),obj:e||c,pick:e||c.getTime()}},c.prototype.createRange=function(a,c){var d=this,e=function(a){return a===!0||b.isArray(a)||f.isDate(a)?d.create(a):a};return f.isInteger(a)||(a=e(a)),f.isInteger(c)||(c=e(c)),f.isInteger(a)&&b.isPlainObject(c)?a=[c.year,c.month,c.date+a]:f.isInteger(c)&&b.isPlainObject(a)&&(c=[a.year,a.month,a.date+c]),{from:e(a),to:e(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b,c){return b=new Date,c&&c.rel&&b.setDate(b.getDate()+c.rel),this.normalize(b,c)},c.prototype.navigate=function(a,c,d){var e,f,g,h,i=b.isArray(c),j=b.isPlainObject(c),k=this.item.view;if(i||j){for(j?(f=c.year,g=c.month,h=c.date):(f=+c[0],g=+c[1],h=+c[2]),d&&d.nav&&k&&k.month!==g&&(f=k.year,g=k.month),e=new Date(f,g+(d&&d.nav?d.nav:0),1),f=e.getFullYear(),g=e.getMonth();new Date(f,g,h).getMonth()!==g;)h-=1;c=[f,g,h]}return c},c.prototype.normalize=function(a){return a.setHours(0,0,0,0),a},c.prototype.measure=function(a,b){var c=this;return b?"string"==typeof b?b=c.parse(a,b):f.isInteger(b)&&(b=c.now(a,b,{rel:b})):b="min"==a?-(1/0):1/0,b},c.prototype.viewset=function(a,b){return this.create([b.year,b.month,1])},c.prototype.validate=function(a,c,d){var e,g,h,i,j=this,k=c,l=d&&d.interval?d.interval:1,m=-1===j.item.enable,n=j.item.min,o=j.item.max,p=m&&j.item.disable.filter(function(a){if(b.isArray(a)){var d=j.create(a).pick;d<c.pick?e=!0:d>c.pick&&(g=!0)}return f.isInteger(a)}).length;if((!d||!d.nav&&!d.defaultValue)&&(!m&&j.disabled(c)||m&&j.disabled(c)&&(p||e||g)||!m&&(c.pick<=n.pick||c.pick>=o.pick)))for(m&&!p&&(!g&&l>0||!e&&0>l)&&(l*=-1);j.disabled(c)&&(Math.abs(l)>1&&(c.month<k.month||c.month>k.month)&&(c=k,l=l>0?1:-1),c.pick<=n.pick?(h=!0,l=1,c=j.create([n.year,n.month,n.date+(c.pick===n.pick?0:-1)])):c.pick>=o.pick&&(i=!0,l=-1,c=j.create([o.year,o.month,o.date+(c.pick===o.pick?0:1)])),!h||!i);)c=j.create([c.year,c.month,c.date+l]);return c},c.prototype.disabled=function(a){var c=this,d=c.item.disable.filter(function(d){return f.isInteger(d)?a.day===(c.settings.firstDay?d:d-1)%7:b.isArray(d)||f.isDate(d)?a.pick===c.create(d).pick:b.isPlainObject(d)?c.withinRange(d,a):void 0});return d=d.length&&!d.filter(function(a){return b.isArray(a)&&"inverted"==a[3]||b.isPlainObject(a)&&a.inverted}).length,-1===c.item.enable?!d:d||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.parse=function(a,b,c){var d=this,e={};return b&&"string"==typeof b?(c&&c.format||(c=c||{},c.format=d.settings.format),d.formats.toArray(c.format).map(function(a){var c=d.formats[a],g=c?f.trigger(c,d,[b,e]):a.replace(/^!/,"").length;c&&(e[a]=b.substr(0,g)),b=b.substr(g)}),[e.yyyy||e.yy,+(e.mm||e.m)-1,e.dd||e.d]):b},c.prototype.formats=function(){function a(a,b,c){var d=a.match(/[^\x00-\x7F]+|\w+/)[0];return c.mm||c.m||(c.m=b.indexOf(d)+1),d.length}function b(a){return a.match(/\w+/)[0].length}return{d:function(a,b){return a?f.digits(a):b.date},dd:function(a,b){return a?2:f.lead(b.date)},ddd:function(a,c){return a?b(a):this.settings.weekdaysShort[c.day]},dddd:function(a,c){return a?b(a):this.settings.weekdaysFull[c.day]},m:function(a,b){return a?f.digits(a):b.month+1},mm:function(a,b){return a?2:f.lead(b.month+1)},mmm:function(b,c){var d=this.settings.monthsShort;return b?a(b,d,c):d[c.month]},mmmm:function(b,c){var d=this.settings.monthsFull;return b?a(b,d,c):d[c.month]},yy:function(a,b){return a?2:(""+b.year).slice(2)},yyyy:function(a,b){return a?4:b.year},toArray:function(a){return a.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return f.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}}}(),c.prototype.isDateExact=function(a,c){var d=this;return f.isInteger(a)&&f.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(f.isDate(a)||b.isArray(a))&&(f.isDate(c)||b.isArray(c))?d.create(a).pick===d.create(c).pick:b.isPlainObject(a)&&b.isPlainObject(c)?d.isDateExact(a.from,c.from)&&d.isDateExact(a.to,c.to):!1},c.prototype.isDateOverlap=function(a,c){var d=this,e=d.settings.firstDay?1:0;return f.isInteger(a)&&(f.isDate(c)||b.isArray(c))?(a=a%7+e,a===d.create(c).day+1):f.isInteger(c)&&(f.isDate(a)||b.isArray(a))?(c=c%7+e,c===d.create(a).day+1):b.isPlainObject(a)&&b.isPlainObject(c)?d.overlapRanges(a,c):!1},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(-1==b.enable?1:-1)},c.prototype.deactivate=function(a,c){var d=this,e=d.item.disable.slice(0);return"flip"==c?d.flipEnable():c===!1?(d.flipEnable(1),e=[]):c===!0?(d.flipEnable(-1),e=[]):c.map(function(a){for(var c,g=0;g<e.length;g+=1)if(d.isDateExact(a,e[g])){c=!0;break}c||(f.isInteger(a)||f.isDate(a)||b.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&e.push(a)}),e},c.prototype.activate=function(a,c){var d=this,e=d.item.disable,g=e.length;return"flip"==c?d.flipEnable():c===!0?(d.flipEnable(1),e=[]):c===!1?(d.flipEnable(-1),e=[]):c.map(function(a){var c,h,i,j;for(i=0;g>i;i+=1){if(h=e[i],d.isDateExact(h,a)){c=e[i]=null,j=!0;break}if(d.isDateOverlap(h,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):b.isArray(a)?(c=a,c[3]||c.push("inverted")):f.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}}if(c)for(i=0;g>i;i+=1)if(d.isDateExact(e[i],a)){e[i]=null;break}if(j)for(i=0;g>i;i+=1)if(d.isDateOverlap(e[i],a)){e[i]=null;break}c&&e.push(c)}),e.filter(function(a){return null!=a})},c.prototype.nodes=function(a){var b=this,c=b.settings,g=b.item,h=g.now,i=g.select,j=g.highlight,k=g.view,l=g.disable,m=g.min,n=g.max,o=function(a,b){return c.firstDay&&(a.push(a.shift()),b.push(b.shift())),f.node("thead",f.node("tr",f.group({min:0,max:d-1,i:1,node:"th",item:function(d){return[a[d],c.klass.weekdays,'scope=col title="'+b[d]+'"']}})))}((c.showWeekdaysFull?c.weekdaysFull:c.weekdaysShort).slice(0),c.weekdaysFull.slice(0)),p=function(a){return f.node("div"," ",c.klass["nav"+(a?"Next":"Prev")]+(a&&k.year>=n.year&&k.month>=n.month||!a&&k.year<=m.year&&k.month<=m.month?" "+c.klass.navDisabled:""),"data-nav="+(a||-1)+" "+f.ariaAttr({role:"button",controls:b.$node[0].id+"_table"})+' title="'+(a?c.labelMonthNext:c.labelMonthPrev)+'"')},q=function(){var d=c.showMonthsShort?c.monthsShort:c.monthsFull;return c.selectMonths?f.node("select",f.group({min:0,max:11,i:1,node:"option",item:function(a){return[d[a],0,"value="+a+(k.month==a?" selected":"")+(k.year==m.year&&a<m.month||k.year==n.year&&a>n.month?" disabled":"")]}}),c.klass.selectMonth,(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelMonthSelect+'"'):f.node("div",d[k.month],c.klass.month)},r=function(){var d=k.year,e=c.selectYears===!0?5:~~(c.selectYears/2);if(e){var g=m.year,h=n.year,i=d-e,j=d+e;if(g>i&&(j+=g-i,i=g),j>h){var l=i-g,o=j-h;i-=l>o?o:l,j=h}return f.node("select",f.group({min:i,max:j,i:1,node:"option",item:function(a){return[a,0,"value="+a+(d==a?" selected":"")]}}),c.klass.selectYear,(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelYearSelect+'"')}return f.node("div",d,c.klass.year)};return f.node("div",(c.selectYears?r()+q():q()+r())+p()+p(1),c.klass.header)+f.node("table",o+f.node("tbody",f.group({min:0,max:e-1,i:1,node:"tr",item:function(a){var e=c.firstDay&&0===b.create([k.year,k.month,1]).day?-7:0;return[f.group({min:d*a-k.day+e+1,max:function(){return this.min+d-1},i:1,node:"td",item:function(a){a=b.create([k.year,k.month,a+(c.firstDay?1:0)]);var d=i&&i.pick==a.pick,e=j&&j.pick==a.pick,g=l&&b.disabled(a)||a.pick<m.pick||a.pick>n.pick,o=f.trigger(b.formats.toString,b,[c.format,a]);return[f.node("div",a.date,function(b){return b.push(k.month==a.month?c.klass.infocus:c.klass.outfocus),h.pick==a.pick&&b.push(c.klass.now),d&&b.push(c.klass.selected),e&&b.push(c.klass.highlighted),g&&b.push(c.klass.disabled),b.join(" ")}([c.klass.day]),"data-pick="+a.pick+" "+f.ariaAttr({role:"gridcell",label:o,selected:d&&b.$node.val()===o?!0:null,activedescendant:e?!0:null,disabled:g?!0:null})),"",f.ariaAttr({role:"presentation"})]}})]}})),c.klass.table,'id="'+b.$node[0].id+'_table" '+f.ariaAttr({role:"grid",controls:b.$node[0].id,readonly:!0}))+f.node("div",f.node("button",c.today,c.klass.buttonToday,"type=button data-pick="+h.pick+(a&&!b.disabled(h)?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.clear,c.klass.buttonClear,"type=button data-clear=1"+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.close,c.klass.buttonClose,"type=button data-close=true "+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id})),c.klass.footer)},c.defaults=function(a){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,format:"d mmmm, yyyy",klass:{table:a+"table",header:a+"header",navPrev:a+"nav--prev",navNext:a+"nav--next",navDisabled:a+"nav--disabled",month:a+"month",year:a+"year",selectMonth:a+"select--month",selectYear:a+"select--year",weekdays:a+"weekday",day:a+"day",disabled:a+"day--disabled",selected:a+"day--selected",highlighted:a+"day--highlighted",now:a+"day--today",infocus:a+"day--infocus",outfocus:a+"day--outfocus",footer:a+"footer",buttonClear:a+"button--clear",buttonToday:a+"button--today",buttonClose:a+"button--close"}}}(a.klasses().picker+"__"),a.extend("pickadate",c)});


/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var r=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(r))}function r(t){var r=t.target,a=e(r);if(!a.is("[type=submit],[type=image]")){var n=a.closest("[type=submit]");if(0===n.length)return;r=n[0]}var i=this;if(i.clk=r,"image"==r.type)if(void 0!==t.offsetX)i.clk_x=t.offsetX,i.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=a.offset();i.clk_x=t.pageX-o.left,i.clk_y=t.pageY-o.top}else i.clk_x=t.pageX-r.offsetLeft,i.clk_y=t.pageY-r.offsetTop;setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}function a(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var n={};n.fileapi=void 0!==e("<input type='file'/>").get(0).files,n.formdata=void 0!==window.FormData;var i=!!e.fn.prop;e.fn.attr2=function(){if(!i)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function r(r){var a,n,i=e.param(r,t.traditional).split("&"),o=i.length,s=[];for(a=0;o>a;a++)i[a]=i[a].replace(/\+/g," "),n=i[a].split("="),s.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return s}function o(a){for(var n=new FormData,i=0;i<a.length;i++)n.append(a[i].name,a[i].value);if(t.extraData){var o=r(t.extraData);for(i=0;i<o.length;i++)o[i]&&n.append(o[i][0],o[i][1])}t.data=null;var s=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:u||"POST"});t.uploadProgress&&(s.xhr=function(){var r=e.ajaxSettings.xhr();return r.upload&&r.upload.addEventListener("progress",function(e){var r=0,a=e.loaded||e.position,n=e.total;e.lengthComputable&&(r=Math.ceil(a/n*100)),t.uploadProgress(e,a,n,r)},!1),r}),s.data=null;var c=s.beforeSend;return s.beforeSend=function(e,r){r.data=t.formData?t.formData:n,c&&c.call(this,e,r)},e.ajax(s)}function s(r){function n(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(r){a("cannot get iframe.contentWindow document: "+r)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(r){a("cannot get iframe.contentDocument: "+r),t=e.document}return t}function o(){function t(){try{var e=n(g).readyState;a("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(r){a("Server abort: ",r," (",r.name,")"),s(k),j&&clearTimeout(j),j=void 0}}var r=f.attr2("target"),i=f.attr2("action"),o="multipart/form-data",c=f.attr("enctype")||f.attr("encoding")||o;w.setAttribute("target",p),(!u||/post/i.test(u))&&w.setAttribute("method","POST"),i!=m.url&&w.setAttribute("action",m.url),m.skipEncodingOverride||u&&!/post/i.test(u)||f.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(j=setTimeout(function(){T=!0,s(D)},m.timeout));var l=[];try{if(m.extraData)for(var d in m.extraData)m.extraData.hasOwnProperty(d)&&l.push(e.isPlainObject(m.extraData[d])&&m.extraData[d].hasOwnProperty("name")&&m.extraData[d].hasOwnProperty("value")?e('<input type="hidden" name="'+m.extraData[d].name+'">').val(m.extraData[d].value).appendTo(w)[0]:e('<input type="hidden" name="'+d+'">').val(m.extraData[d]).appendTo(w)[0]);m.iframeTarget||v.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1),setTimeout(t,15);try{w.submit()}catch(h){var x=document.createElement("form").submit;x.apply(w)}}finally{w.setAttribute("action",i),w.setAttribute("enctype",c),r?w.setAttribute("target",r):f.removeAttr("target"),e(l).remove()}}function s(t){if(!x.aborted&&!F){if(M=n(g),M||(a("cannot access response document"),t=k),t===D&&x)return x.abort("timeout"),void S.reject(x,"timeout");if(t==k&&x)return x.abort("server abort"),void S.reject(x,"error","server abort");if(M&&M.location.href!=m.iframeSrc||T){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var r,i="success";try{if(T)throw"timeout";var o="xml"==m.dataType||M.XMLDocument||e.isXMLDoc(M);if(a("isXml="+o),!o&&window.opera&&(null===M.body||!M.body.innerHTML)&&--O)return a("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var u=M.body?M.body:M.documentElement;x.responseText=u?u.innerHTML:null,x.responseXML=M.XMLDocument?M.XMLDocument:M,o&&(m.dataType="xml"),x.getResponseHeader=function(e){var t={"content-type":m.dataType};return t[e.toLowerCase()]},u&&(x.status=Number(u.getAttribute("status"))||x.status,x.statusText=u.getAttribute("statusText")||x.statusText);var c=(m.dataType||"").toLowerCase(),l=/(json|script|text)/.test(c);if(l||m.textarea){var f=M.getElementsByTagName("textarea")[0];if(f)x.responseText=f.value,x.status=Number(f.getAttribute("status"))||x.status,x.statusText=f.getAttribute("statusText")||x.statusText;else if(l){var p=M.getElementsByTagName("pre")[0],h=M.getElementsByTagName("body")[0];p?x.responseText=p.textContent?p.textContent:p.innerText:h&&(x.responseText=h.textContent?h.textContent:h.innerText)}}else"xml"==c&&!x.responseXML&&x.responseText&&(x.responseXML=X(x.responseText));try{E=_(x,c,m)}catch(y){i="parsererror",x.error=r=y||i}}catch(y){a("error caught: ",y),i="error",x.error=r=y||i}x.aborted&&(a("upload aborted"),i=null),x.status&&(i=x.status>=200&&x.status<300||304===x.status?"success":"error"),"success"===i?(m.success&&m.success.call(m.context,E,"success",x),S.resolve(x.responseText,"success",x),d&&e.event.trigger("ajaxSuccess",[x,m])):i&&(void 0===r&&(r=x.statusText),m.error&&m.error.call(m.context,x,i,r),S.reject(x,"error",r),d&&e.event.trigger("ajaxError",[x,m,r])),d&&e.event.trigger("ajaxComplete",[x,m]),d&&!--e.active&&e.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,x,i),F=!0,m.timeout&&clearTimeout(j),setTimeout(function(){m.iframeTarget?v.attr("src",m.iframeSrc):v.remove(),x.responseXML=null},100)}}}var c,l,m,d,p,v,g,x,y,b,T,j,w=f[0],S=e.Deferred();if(S.abort=function(e){x.abort(e)},r)for(l=0;l<h.length;l++)c=e(h[l]),i?c.prop("disabled",!1):c.removeAttr("disabled");if(m=e.extend(!0,{},e.ajaxSettings,t),m.context=m.context||m,p="jqFormIO"+(new Date).getTime(),m.iframeTarget?(v=e(m.iframeTarget),b=v.attr2("name"),b?p=b:v.attr2("name",p)):(v=e('<iframe name="'+p+'" src="'+m.iframeSrc+'" />'),v.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=v[0],x={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var r="timeout"===t?"timeout":"aborted";a("aborting upload... "+r),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(n){}v.attr("src",m.iframeSrc),x.error=r,m.error&&m.error.call(m.context,x,r,t),d&&e.event.trigger("ajaxError",[x,m,r]),m.complete&&m.complete.call(m.context,x,r)}},d=m.global,d&&0===e.active++&&e.event.trigger("ajaxStart"),d&&e.event.trigger("ajaxSend",[x,m]),m.beforeSend&&m.beforeSend.call(m.context,x,m)===!1)return m.global&&e.active--,S.reject(),S;if(x.aborted)return S.reject(),S;y=w.clk,y&&(b=y.name,b&&!y.disabled&&(m.extraData=m.extraData||{},m.extraData[b]=y.value,"image"==y.type&&(m.extraData[b+".x"]=w.clk_x,m.extraData[b+".y"]=w.clk_y)));var D=1,k=2,A=e("meta[name=csrf-token]").attr("content"),L=e("meta[name=csrf-param]").attr("content");L&&A&&(m.extraData=m.extraData||{},m.extraData[L]=A),m.forceSync?o():setTimeout(o,10);var E,M,F,O=50,X=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},C=e.parseJSON||function(e){return window.eval("("+e+")")},_=function(t,r,a){var n=t.getResponseHeader("content-type")||"",i="xml"===r||!r&&n.indexOf("xml")>=0,o=i?t.responseXML:t.responseText;return i&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),a&&a.dataFilter&&(o=a.dataFilter(o,r)),"string"==typeof o&&("json"===r||!r&&n.indexOf("json")>=0?o=C(o):("script"===r||!r&&n.indexOf("javascript")>=0)&&e.globalEval(o)),o};return S}if(!this.length)return a("ajaxSubmit: skipping submit process - no element selected"),this;var u,c,l,f=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),u=t.type||this.attr2("method"),c=t.url||this.attr2("action"),l="string"==typeof c?e.trim(c):"",l=l||window.location.href||"",l&&(l=(l.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:l,success:e.ajaxSettings.success,type:u||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var m={};if(this.trigger("form-pre-serialize",[this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=t.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var p,h=[],v=this.formToArray(t.semantic,h);if(t.data&&(t.extraData=t.data,p=e.param(t.data,d)),t.beforeSubmit&&t.beforeSubmit(v,this,t)===!1)return a("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,t,m]),m.veto)return a("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=e.param(v,d);p&&(g=g?g+"&"+p:p),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+g,t.data=null):t.data=g;var x=[];if(t.resetForm&&x.push(function(){f.resetForm()}),t.clearForm&&x.push(function(){f.clearForm(t.includeHidden)}),!t.dataType&&t.target){var y=t.success||function(){};x.push(function(r){var a=t.replaceTarget?"replaceWith":"html";e(t.target)[a](r).each(y,arguments)})}else t.success&&x.push(t.success);if(t.success=function(e,r,a){for(var n=t.context||this,i=0,o=x.length;o>i;i++)x[i].apply(n,[e,r,a||f,f])},t.error){var b=t.error;t.error=function(e,r,a){var n=t.context||this;b.apply(n,[e,r,a,f])}}if(t.complete){var T=t.complete;t.complete=function(e,r){var a=t.context||this;T.apply(a,[e,r,f])}}var j=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),w=j.length>0,S="multipart/form-data",D=f.attr("enctype")==S||f.attr("encoding")==S,k=n.fileapi&&n.formdata;a("fileAPI :"+k);var A,L=(w||D)&&!k;t.iframe!==!1&&(t.iframe||L)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){A=s(v)}):A=s(v):A=(w||D)&&k?o(v):e.ajax(t),f.removeData("jqxhr").data("jqxhr",A);for(var E=0;E<h.length;E++)h[E]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(n){if(n=n||{},n.delegation=n.delegation&&e.isFunction(e.fn.on),!n.delegation&&0===this.length){var i={s:this.selector,c:this.context};return!e.isReady&&i.s?(a("DOM not ready, queuing ajaxForm"),e(function(){e(i.s,i.c).ajaxForm(n)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return n.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,n,t).on("click.form-plugin",this.selector,n,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",n,t).bind("click.form-plugin",n,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,r){var a=[];if(0===this.length)return a;var i,o=this[0],s=this.attr("id"),u=t?o.getElementsByTagName("*"):o.elements;if(u&&!/MSIE [678]/.test(navigator.userAgent)&&(u=e(u).get()),s&&(i=e(':input[form="'+s+'"]').get(),i.length&&(u=(u||[]).concat(i))),!u||!u.length)return a;var c,l,f,m,d,p,h;for(c=0,p=u.length;p>c;c++)if(d=u[c],f=d.name,f&&!d.disabled)if(t&&o.clk&&"image"==d.type)o.clk==d&&(a.push({name:f,value:e(d).val(),type:d.type}),a.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}));else if(m=e.fieldValue(d,!0),m&&m.constructor==Array)for(r&&r.push(d),l=0,h=m.length;h>l;l++)a.push({name:f,value:m[l]});else if(n.fileapi&&"file"==d.type){r&&r.push(d);var v=d.files;if(v.length)for(l=0;l<v.length;l++)a.push({name:f,value:v[l],type:d.type});else a.push({name:f,value:"",type:d.type})}else null!==m&&"undefined"!=typeof m&&(r&&r.push(d),a.push({name:f,value:m,type:d.type,required:d.required}));if(!t&&o.clk){var g=e(o.clk),x=g[0];f=x.name,f&&!x.disabled&&"image"==x.type&&(a.push({name:f,value:g.val()}),a.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y}))}return a},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var r=[];return this.each(function(){var a=this.name;if(a){var n=e.fieldValue(this,t);if(n&&n.constructor==Array)for(var i=0,o=n.length;o>i;i++)r.push({name:a,value:n[i]});else null!==n&&"undefined"!=typeof n&&r.push({name:this.name,value:n})}}),e.param(r)},e.fn.fieldValue=function(t){for(var r=[],a=0,n=this.length;n>a;a++){var i=this[a],o=e.fieldValue(i,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(r,o):r.push(o))}return r},e.fieldValue=function(t,r){var a=t.name,n=t.type,i=t.tagName.toLowerCase();if(void 0===r&&(r=!0),r&&(!a||t.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!t.checked||("submit"==n||"image"==n)&&t.form&&t.form.clk!=t||"select"==i&&-1==t.selectedIndex))return null;if("select"==i){var o=t.selectedIndex;if(0>o)return null;for(var s=[],u=t.options,c="select-one"==n,l=c?o+1:u.length,f=c?o:0;l>f;f++){var m=u[f];if(m.selected){var d=m.value;if(d||(d=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),c)return d;s.push(d)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var r=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,n=this.tagName.toLowerCase();r.test(a)||"textarea"==n?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==n?this.selectedIndex=-1:"file"==a?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(a)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var r=this.type;if("checkbox"==r||"radio"==r)this.checked=t;else if("option"==this.tagName.toLowerCase()){var a=e(this).parent("select");t&&a[0]&&"select-one"==a[0].type&&a.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1});


/*
 * Wenpopover - jQuery Popover
 */
var Wenpopover={ver:"1.4",Styles:{basic:{afterUpdate:!1,ajax:{cache:!0,type:"get"},background:{color:"#f2f2f2",opacity:1},border:{size:1,color:"#000",opacity:1},closeBtnStyle:"default",containment:{selector:"viewport"},fadeIn:180,fadeOut:220,showDelay:75,hideDelay:25,radius:{size:2,position:"background"},hideAfter:!1,hideOn:{element:"self",event:"mouseleave"},hideOthers:!1,hook:"topleft",inline:!1,offset:{x:0,y:0},onHide:!1,onShow:!1,shadow:{blur:2,color:"#000",offset:{x:0,y:0},opacity:.12},showOn:"mousemove",
stem:{height:9,width:18,offset:{x:9,y:9},spacing:2},target:"self"},reset:{ajax:!1,closeBtn:!1,hideOn:[{element:"self",event:"mouseleave"},{element:"tooltip",event:"mouseleave"}],hook:"topmiddle",stem:!0},dark:{background:{color:"#282828"},border:{color:"#9b9b9b",opacity:.4,size:1},shadow:{opacity:.02}},white:{background:{color:[{position:0,color:"#ffffff"},{position:1,color:"#f5f5f5"}]},border:{color:"#666666",opacity:.3,size:1},fadeIn:1,fadeOut:2,radius:1,stem:{width:11,height:6,offset:{x:20,y:6}},shadow:{blur:2,color:"#000",offset:{x:2,y:2},opacity:.1}},gray:{background:{color:[{position:0,color:"#8f8f8f"},
{position:1,color:"#808080"}]},border:{color:"#131313",size:1,opacity:.6}},tipfo:{background:{color:[{position:0,color:"#fff3a6"},{position:1,color:"#f9ea8a"}]},border:{color:"#666666",opacity:.3,size:1},fadeIn:1,fadeOut:2,radius:1,stem:{width:11,height:6,offset:{x:20,y:6}},shadow:{blur:2,color:"#000",offset:{x:2,y:2},opacity:.1}}}};
Wenpopover.Styles.closebtns={basic:{diameter:17,border:2,x:{diameter:10,size:2,opacity:1},states:{"default":{background:{color:[{position:0,color:"#1a1a1a"},{position:.46,color:"#171717"},{position:.53,color:"#121212"},{position:.54,color:"#101010"},{position:1,color:"#000"}],opacity:1},x:{color:"#fafafa",opacity:1},border:{color:"#fff",opacity:1}},hover:{background:{color:"#333",opacity:1},x:{color:"#e6e6e6",opacity:1},border:{color:"#fff",opacity:1}}},shadow:{blur:1,color:"#000",offset:{x:0,y:0},
opacity:.5}},reset:{},"default":{},white:{diameter:17,border:2,x:{diameter:10,size:2,opacity:1},states:{"default":{background:{color:[{position:0,color:"#797979"},{position:.48,color:"#717171"},{position:.52,color:"#666"},{position:1,color:"#666"}],opacity:1},x:{color:"#fff",opacity:.95},border:{color:"#676767",opacity:1}},hover:{background:{color:[{position:0,color:"#868686"},{position:.48,color:"#7f7f7f"},{position:.52,color:"#757575"},{position:1,color:"#757575"}],opacity:1},x:{color:"#fff",opacity:1},
border:{color:"#767676",opacity:1}}}}};
(function(e){function N(a,b){var c=[a,b];c.left=a;c.top=b;return c}function J(a){this.element=a}function w(a){var b={},c;for(c in a)b[c]=a[c]+"px";return b}function x(a){return a*Math.PI/180}function O(a){if(a){this.element=a;E.remove(a);var b=this.getPopover();this.options=e.extend({},b.options);this._globalAlpha=1;this._cache={};this.uid=e(a).data("wenpopover-uid");E.add(this);this._hookPosition=this.options.hook.tooltip;this._stemPosition=this.options.stem&&this._hookPosition;this._stemCorrection=
{x:0,y:0};this._adjustment={top:0,left:0};this.build()}}function P(a,b,c){(this.element=a)&&b&&(this.options=e.extend({blur:3,offset:{x:0,y:0},color:"#000",opacity:.5,globalAlpha:1},c||{}),this._globalAlpha=this.options.globalAlpha,this._cache={},this.uid=e(a).data("wenpopover-uid"),F.add(this),this.build())}function Q(a,b){if(this.element=a)this.options=e.extend({blur:5,offset:{x:0,y:0},color:"#000",opacity:.5,globalAlpha:1},b||{}),this._globalAlpha=this.options.globalAlpha,this.uid=e(a).data("wenpopover-uid"),
R.add(this),this.build()}function C(a,b){for(var c in b)b[c]&&b[c].constructor&&b[c].constructor===Object?(a[c]=e.extend({},a[c])||{},C(a[c],b[c])):a[c]=b[c];return a}function K(a,b,c){if(this.element=a){var f=e(a).data("wenpopover-uid");f&&v.remove(a);f=S();e(a).data("wenpopover-uid",f);this.uid=f;"object"!=e.type(b)||y.isElement(b)?c=c||{}:(c=b,b=null);this.options=v.createOptions(c);c=a.getAttribute("title");b||((f=a.getAttribute("data-wenpopover"))?b=f:c&&(b=c));c&&(e(a).data("wenpopover_restore_title",
c),a.setAttribute("title",""));this.content=b;this.zIndex=this.options.zIndex||+v.options.startingZIndex;this._cache={contentDimensions:{width:1,height:1},events:[],timers:[],states:{active:!1,xhr:!1,visible:!1,updated:!1,build:!1,styled:!1,toggles:!1,preloading_images:!1},fnCallContent:""};a=this.options.target;this.target="mouse"==a?"mouse":"self"!=a&&a?y.isElement(a)?a:a&&document.getElementById(a)||this.element:this.element;this._preBuild();v.add(this)}}var L=Array.prototype.slice,y={wrap:function(a,
b){return function(){var c=[e.proxy(a,this)].concat(L.call(arguments));return b.apply(this,c)}},isElement:function(a){return a&&1==a.nodeType},delay:function(a,b){var c=L.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},defer:function(a){return y.delay.apply(this,[a,1].concat(L.call(arguments,1)))},pointer:function(a){return{x:a.pageX,y:a.pageY}},element:{cumulativeScrollOffset:function(a){var b=0,c=0;do b+=a.scrollTop||0,c+=a.scrollLeft||0,a=a.parentNode;while(a);return N(c,
b)},cumulativeOffset:function(a){var b=e(a).offset();a=y.element.cumulativeScrollOffset(a);var c=e(window).scrollTop(),f=e(window).scrollLeft();b.left+=a.left-f;b.top+=a.top-c;return N(b.left,b.top)},isAttached:function(){return function(a){for(;a&&a.parentNode;)a=a.parentNode;return!(!a||!a.body)}}()}},G=function(a){function b(c){return(c=(new RegExp(c+"([\\d.]+)")).exec(a))?parseFloat(c[1]):!0}return{IE:!(!window.attachEvent||-1!==a.indexOf("Opera"))&&b("MSIE "),Opera:-1<a.indexOf("Opera")&&(!!window.opera&&
opera.version&&parseFloat(opera.version())||7.55),WebKit:-1<a.indexOf("AppleWebKit/")&&b("AppleWebKit/"),Gecko:-1<a.indexOf("Gecko")&&-1===a.indexOf("KHTML")&&b("rv:"),MobileSafari:!!a.match(/Apple.*Mobile.*Safari/),Chrome:-1<a.indexOf("Chrome")&&b("Chrome/")}}(navigator.userAgent),T={scripts:{jQuery:{required:"1.4.4",available:window.jQuery&&jQuery.fn.jquery}},check:function(){function a(a){for(var c=(a=a.match(b))&&a[1]&&a[1].split(".")||[],d=0,e=0,q=c.length;e<q;e++)d+=parseInt(c[e]*Math.pow(10,
6-2*e));return a&&a[3]?d-1:d}var b=/^(\d+(\.?\d+){0,3})([A-Za-z_-]+[A-Za-z0-9]+)?/;return function(c){if(!this.scripts[c].checked&&(this.scripts[c].checked=!0,!this.scripts[c].available||a(this.scripts[c].available)<a(this.scripts[c].required)&&!this.scripts[c].notified)&&(this.scripts[c].notified=!0,window.console))console[console.warn?"warn":"log"]("Wenpopover requires "+c+" >= "+this.scripts[c].required)}}()},S=function(){var a=0;return function(b){b=b||"_wpop_uid_";for(a++;document.getElementById(b+
a);)a++;return b+a}}(),M=function(){var a=[];return{get:function(b){for(var c=null,f=0;f<a.length;f++)a[f]&&a[f].url==b.url&&a[f].type.toUpperCase()==b.type.toUpperCase()&&e.param(a[f].data||{})==e.param(b.data||{})&&(c=a[f].responseText);return c},set:function(b,c){this.remove(b.url);a.push(e.extend({},b,{responseText:c}))},remove:function(b){for(var c=0;c<a.length;c++)a[c]&&a[c].url==b&&delete a[c]},clear:function(){a=[]}}}();e.extend(Wenpopover,function(){var a=function(){var a=document.createElement("canvas");
return!(!a.getContext||!a.getContext("2d"))}(),b;try{b=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}catch(c){b=!1}return{support:{canvas:a,touch:b,cssTransitions:function(){var a=!!window.TransitionEvent;e.each(["WebKitTransitionEvent","TransitionEvent","OTransitionEvent"],function(c,d){try{document.createEvent(d),a=!0}catch(l){}});return a}()},init:function(){if(this.support.canvas||G.IE)T.check("jQuery"),v.RefreshAnt.container&&(v.RefreshAnt.container.remove(),
v.RefreshAnt.container=null),e(document).ready(function(){v.removeAll();v.startDelegating()})},create:function(a,b,d){J.create(a,b,d);return this.get(a)},get:function(a){return new J(a)},findElement:function(a){return v.findElement(a)},show:function(a){this.get(a).show();return this},hide:function(a){this.get(a).hide();return this},toggle:function(a){this.get(a).toggle();return this},refresh:function(a){this.get(a).refresh();return this},remove:function(a){this.get(a).remove();return this},hideAll:function(){v.hideAll();
return this},setDefaultStyle:function(a){v.setDefaultStyle(a);return this},setStartingZIndex:function(a){v.setStartingZIndex(a);return this},visible:function(a){if(y.isElement(a))return v.isVisibleByElement(a);if("undefined"!=e.type(a)){a=e(a);var c=0;e.each(a,function(a,b){v.isVisibleByElement(b)&&c++});return c}return v.getVisible().length},clearAjaxCache:function(){v.clearAjaxCache();return this}}}());e.extend(J,{create:function(a,b,c){if(a){var f=c||{},d=[];v.removeDetached();y.isElement(a)?d.push(new K(a,
b,f)):e(a).each(function(a,c){d.push(new K(c,b,f))});return d}}});e.extend(J.prototype,{items:function(){v.Position.mouseBuffer={x:0,y:0};return v.get(this.element)},show:function(){e.each(this.items(),function(a,b){b.show()});return this},hide:function(){e.each(this.items(),function(a,b){b.hide()});return this},toggle:function(){e.each(this.items(),function(a,b){b.toggle()});return this},refresh:function(){e.each(this.items(),function(a,b){b.refresh()});return this},remove:function(){v.remove(this.element);
return this}});var U={viewport:function(){return G.MobileSafari?{width:window.innerWidth,height:window.innerHeight}:{height:e(window).height(),width:e(window).width()}}},z={devicePixelRatio:Math.ceil(Math.min(window.devicePixelRatio?parseFloat(window.devicePixelRatio)||1:1,2)),init:function(){return window.G_vmlCanvasManager&&!Wenpopover.support.canvas&&G.IE?function(a){G_vmlCanvasManager.initElement(a);a.getContext("2d").scale(z.devicePixelRatio,z.devicePixelRatio)}:function(a){a.getContext("2d").scale(z.devicePixelRatio,
z.devicePixelRatio)}}(),resize:function(a,b){e(a).attr({width:b.width*this.devicePixelRatio,height:b.height*this.devicePixelRatio}).css(w(b))},drawRoundedRectangle:function(a,b){var c=e.extend({top:0,left:0,width:0,height:0,radius:0},b||{}),f=c.left,d=c.top,l=c.width,q=c.height;(c=c.radius)?(a.beginPath(),a.moveTo(f+c,d),a.arc(f+l-c,d+c,c,x(-90),x(0),!1),a.arc(f+l-c,d+q-c,c,x(0),x(90),!1),a.arc(f+c,d+q-c,c,x(90),x(180),!1),a.arc(f+c,d+c,c,x(-180),x(-90),!1),a.closePath(),a.fill()):a.fillRect(f,d,
l,q)},drawPixelArray:function(a,b,c){c=e.extend({x:0,y:0,color:"#000"},c||{});for(var f=0,d=b.length;f<d;f++)for(var l=0,q=b[f].length;l<q;l++){var g=parseInt(b[f].charAt(l))*(1/9);a.fillStyle=D.hex2fill(c.color,g);g&&a.fillRect(c.x+l,c.y+f,1,1)}},createFillStyle:function(a,b,c){var f;"string"==e.type(b)?f=D.hex2fill(b):"string"==e.type(b.color)?f=D.hex2fill(b.color,"number"==e.type(b.opacity)?b.opacity:1):e.isArray(b.color)&&(c=e.extend({x1:0,y1:0,x2:0,y2:0},c||{}),f=z.Gradient.addColorStops(a.createLinearGradient(c.x1,
c.y1,c.x2,c.y2),b.color,b.opacity));return f},Gradient:{addColorStops:function(a,b,c){c="number"==e.type(c)?c:1;for(var f=0,d=b.length;f<d;f++){var l=b[f];if("undefined"==e.type(l.opacity)||"number"!=e.type(l.opacity))l.opacity=1;a.addColorStop(l.position,D.hex2fill(l.color,l.opacity*c))}return a}}},B={positions:"topleft topmiddle topright righttop rightmiddle rightbottom bottomright bottommiddle bottomleft leftbottom leftmiddle lefttop".split(" "),regex:{toOrientation:/^(top|left|bottom|right)(top|left|bottom|right|middle|center)$/,
horizontal:/^(top|bottom)/,isCenter:/(middle|center)/,side:/^(top|bottom|left|right)/},toDimension:function(){var a={top:"height",left:"width",bottom:"height",right:"width"};return function(b){return a[b]}}(),isCenter:function(a){return!!a.toLowerCase().match(this.regex.isCenter)},isCorner:function(a){return!this.isCenter(a)},getOrientation:function(a){return a.toLowerCase().match(this.regex.horizontal)?"horizontal":"vertical"},getSide:function(a){var b=null;(a=a.toLowerCase().match(this.regex.side))&&
a[1]&&(b=a[1]);return b},split:function(a){return a.toLowerCase().match(this.regex.toOrientation)}},I={getDimensions:function(a){a=a.options.stem;return{width:a.width,height:a.height}},getBorderDimensions:function(a,b,c){c=e.extend({math:"ceil"},c||{});a=a.options.stem;b=this.getCenterBorderDimensions(a.width,a.height,b);c.math&&(b.width=Math[c.math](b.width),b.height=Math[c.math](b.height));return{width:b.width,height:b.height}},getCenterBorderDimensions:function(a,b,c){c*=Math.cos(x(180-180*Math.atan(b/
a*.5)/Math.PI-90));c=a+2*c;return{width:c,height:c*b/a}},getLayout:function(a,b){var c=this.getBorderDimensions(a,b),f=this.getDimensions(a);B.isCenter(a._hookPosition);return{box:{dimensions:{width:Math.ceil(c.width),height:Math.ceil(Math.ceil(c.height+b))}},border:{dimensions:c},stem:{dimensions:{width:f.width,height:f.height}}}},getBubbleLayout:function(a,b,c){var f=a.options,d={top:0,left:0},l={top:0,left:0},q=e.extend({},b),g=a.border,p=p||this.getLayout(a,a.border),r=p.box.dimensions;c&&(r.height=
c,g=0);c=B.split(a._hookPosition);var m=B.getOrientation(a._hookPosition);if(a.options.stem){var u=B.getSide(a._hookPosition);"top"==u?d.top=r.height-g:"left"==u&&(d.left=r.height-g);if("horizontal"==m){switch(c[2]){case "middle":case "center":l.left=.5*q.width;break;case "right":l.left=q.width}"bottom"==c[1]&&(l.top=q.height-g+r.height)}else{switch(c[2]){case "middle":case "center":l.top=.5*q.height;break;case "bottom":l.top=q.height}"right"==c[1]&&(l.left=q.width-g+r.height)}q[B.toDimension(u)]+=
r.height-g}else if("horizontal"==m){switch(c[2]){case "middle":case "center":l.left=.5*q.width;break;case "right":l.left=q.width}"bottom"==c[1]&&(l.top=q.height)}else{switch(c[2]){case "middle":case "center":l.top=.5*q.height;break;case "bottom":l.top=q.height}"right"==c[1]&&(l.left=q.width)}g=f.radius&&f.radius.size||0;u=f.border&&f.border.size||0;if(a.options.stem){var h=g&&"background"==f.radius.position?g:0,t=g&&"border"==f.radius.position?g:g+u,n=u+h+.5*p.stem.dimensions.width-.5*p.border.dimensions.width,
h=Math.ceil(u+h+.5*p.stem.dimensions.width+(t>n?t-n:0));if("horizontal"==m)switch(c[2]){case "left":l.left+=h;break;case "right":l.left-=h}else switch(c[2]){case "top":l.top+=h;break;case "bottom":l.top-=h}}var k;if(f.stem&&(k=f.stem.offset))if(k=I.nullifyCornerOffset(k,a._stemPosition,b,p.border.dimensions,u,g).offset,"horizontal"==m)switch(c[2]){case "left":l.left+=k.x;break;case "right":l.left-=k.x}else switch(c[2]){case "top":l.top+=k.y;break;case "bottom":l.top-=k.y}var A;if(f.stem&&(A=f.stem.spacing))if("horizontal"==
m)switch(c[1]){case "top":l.top-=A;break;case "bottom":l.top+=A}else switch(c[1]){case "left":l.left-=A;break;case "right":l.left+=A}return{dimensions:q,position:{top:0,left:0},background:{position:d,dimensions:b},stem:{dimensions:r},anchor:l}},nullifyCornerOffset:function(a,b,c,f,d,l){var q=B.getOrientation(b),g=e.extend({},a),p={x:0,y:0};"horizontal"==q&&c.width-f.width-2*d-2*l<2*a.x&&(p.x=g.x,/(right)$/.test(b)&&(p.x*=-1),g.x=0);"vertical"==q&&c.height-f.height-2*d-2*l<2*a.y&&(p.y=g.y,/(bottom)$/.test(b)&&
(p.y*=-1),g.y=0);return{offset:g,correction:p}}},D=function(){function a(a){a.red=a[0];a.green=a[1];a.blue=a[2];return a}function b(b){var d=Array(3);0==b.indexOf("#")&&(b=b.substring(1));b=b.toLowerCase();if(""!=b.replace(c,""))return null;3==b.length?(d[0]=b.charAt(0)+b.charAt(0),d[1]=b.charAt(1)+b.charAt(1),d[2]=b.charAt(2)+b.charAt(2)):(d[0]=b.substring(0,2),d[1]=b.substring(2,4),d[2]=b.substring(4));for(b=0;b<d.length;b++)d[b]=parseInt(d[b],16);return a(d)}var c=RegExp("[0123456789abcdef]","g");
return{hex2rgb:b,hex2fill:function(a,c){"undefined"==e.type(c)&&(c=1);var d=c,f=b(a);f[3]=d;f.opacity=d;return"rgba("+f.join()+")"},getSaturatedBW:function(c){c=b(c);c=a(c);var d=c.red,e=c.green,f=c.blue,g=d>e?d:e;f>g&&(g=f);var p=d<e?d:e;f<p&&(p=f);c=0!=g?(g-p)/g:0;if(0==c)d=0;else{var r=(g-d)/(g-p),m=(g-e)/(g-p),f=(g-f)/(g-p),d=(d==g?f-m:e==g?2+r-f:4+m-r)/6;0>d&&(d+=1)}d=Math.round(360*d);c=Math.round(100*c);e=Math.round(g/255*100);g=[];g[0]=d;g[1]=c;g[2]=e;g.hue=d;g.saturation=c;g.brightness=e;
return"#"+(50<g[2]?"000":"fff")}}}(),E={styles:{},get:function(a){if(!a)return null;var b=null;(a=e(a).data("wenpopover-uid"))&&(b=this.styles[a]);return b},add:function(a){this.styles[a.uid]=a},remove:function(a){if(a=this.get(a))delete this.styles[a.uid],a.remove()}};e.extend(O.prototype,function(){return{prepare:function(){var a=this.getPopover();this.contentDimensions=a._cache.contentDimensions;a=a.options;this.radius=a.radius&&a.radius.size||0;this.border=a.border&&a.border.size||0;this.padding=
a.padding;a=Math.min(this.contentDimensions.height,this.contentDimensions.width);this.radius>a/2&&(this.radius=Math.floor(a/2));"border"==this.options.radius.position&&this.radius>this.border&&(this.border=this.radius);this._cache={options:{radius:this.radius,border:this.border,padding:this.padding}}},createHookCache:function(){this._cache.hook={};var a=this._hookPosition;e.each(B.positions,e.proxy(function(a,c){var b,d=this._cache.hook[c]={};this._hookPosition=c;b=this.getOrderLayout();d.anchor=
b.anchor;d.bubble={dimensions:b.bubble.dimensions,position:{top:b.bubble.position.top,left:b.bubble.position.left}};d.tooltip={dimensions:b.style.dimensions};if(this.shadow){b=this.shadow.getOrderLayout();var l=b.style.position,q=d.bubble.position;e.extend(!0,d,{anchor:b.anchor,bubble:{position:{top:q.top+l.top,left:q.left+l.left}},tooltip:{dimensions:b.tooltip.dimensions}})}},this));this._hookPosition=a},build:function(){this.cleanup();window.G_vmlCanvasManager&&window.G_vmlCanvasManager.iniwpop_(document);
var a=this.getPopover(),b=this.options;this.bubble=e("<div>").addClass("wpop_bub")[0];e(a.styleElement).append(this.bubble);this.prepare();this.drawBubble(a);b.closeBtn&&(this.drawclosebtn(a),b.closeBtn.shadow&&(this.closebtnshd?(this.closebtnshd.options=b.closeBtn.shadow,this.closebtnshd.build()):this.closebtnshd=new Q(this.element,e.extend({globalAlpha:this._globalAlpha},b.closeBtn.shadow))));G.IE&&7>G.IE&&e(a.container).prepend(this.ifrmshim=e("<iframe>").addClass("wpop_ifrmshim").attr({frameBorder:0,
src:"javascript:'';"}));this.order();b.shadow&&(this.shadow?(this.shadow.options=b.shadow,this.shadow.build()):this.shadow=new P(this.element,this,e.extend({globalAlpha:this._globalAlpha},b.shadow)));this.createHookCache()},remove:function(){this.cleanup();this.options.shadow&&(F.remove(this.element),this.options.closeBtn&&this.options.closeBtn.shadow&&R.remove(this.element));this.ifrmshim&&(this.ifrmshim.remove(),this.ifrmshim=null);this.container&&(e(this.container).remove(),this.container=null)},
cleanup:function(){this.bubble&&(this.closeBtn&&(e(this.closeBtn).remove(),this.hoverclosebtn=this.defaultclosebtn=this.closeBtn=null),e(this.bubble).remove(),this.bubble=this.background=this.stem=null,this._cache={})},getPopover:function(){return v.get(this.element)[0]},refresh:function(){var a=this.getPopover(),b=e(a.container),c=e(a.container).find(".wpop_contentwrap").first()[0];if(c){e(c).css({width:"auto",height:"auto"});var f=parseInt(b.css("top")),d=parseInt(b.css("left")),l=parseInt(b.css("width"));
b.css({left:"-25000px",top:"-25000px",width:"15000px",height:"auto"});a.getState("visible")||e(a.container).show();var q=v.RefreshAnt.getMeasureElementDimensions(c);a.options.maxWidth&&"number"==e.type(a.options.maxWidth)&&q.width>a.options.maxWidth&&(e(c).css({width:a.options.maxWidth+"px"}),q=v.RefreshAnt.getMeasureElementDimensions(c));a.getState("visible")||e(a.container).hide();a._cache.contentDimensions=q;b.css({left:d+"px",top:f+"px",width:l+"px"});this.build()}},setHookPositionAndAdjCorrection:function(a,
b,c){var e=!1;this.setHookPosition(a)&&(e=!0);this.setAdjCorrection(b)&&(e=!0);c&&this.setAdjustment(c)&&(e=!0);e&&this.build()},setAdjustment:function(a){var b=!1;if(this._adjustment.left!=a.left||this._adjustment.top!=a.top)b=!0,this._adjustment=a;return b},setAdjCorrection:function(a){var b=!1;if(this._stemCorrection.x!=a.x||this._stemCorrection.y!=a.y)b=!0,this._stemCorrection=a;return b},setHookPosition:function(a,b){var c=!1;this._hookPosition!=a&&(c=!0,this._hookPosition=a);return c},drawclosebtn:function(a){var b=
a.options.closeBtn,b={width:b.diameter+2*b.border,height:b.diameter+2*b.border};e(a.container).append(e(this.closeBtn=document.createElement("div")).addClass("wpop_close").css(w(b)).append(e(this.closeBtnShift=document.createElement("div")).addClass("wpop_closebtnshf").css(w(b))));this.drawclosebtnState(a,"default");this.drawclosebtnState(a,"hover");Wenpopover.support.touch||G.Chrome||e(this.closeBtn).bind("mouseenter",e.proxy(this.closeBtnMouseover,this)).bind("mouseleave",e.proxy(this.closeBtnMouseout,
this))},drawclosebtnState:function(a,b){var c=a.options.closeBtn,f=c.diameter,d=c.border||0,l=c.x.diameter,q=c.x.size,g=c.states[b||"default"],p={width:f+2*d,height:f+2*d};l>=f&&(l=f-2);var r;e(this.closeBtnShift).append(e(this[b+"closebtn"]=document.createElement("div")).addClass("wpop_closestt").css(e.extend(w(p),{left:("hover"==b?p.width:0)+"px"})));e(document.body).append(e(r=document.createElement("canvas")));z.resize(r,p);z.init(r);c=r.getContext("2d");c.globalAlpha=this._globalAlpha;e(this[b+
"closebtn"]).append(r);c.translate(p.width/2,p.height/2);c.fillStyle=z.createFillStyle(c,g.background,{x1:0,y1:0-f/2,x2:0,y2:0+f/2});c.beginPath();c.arc(0,0,f/2,0,2*Math.PI,!0);c.closePath();c.fill();d&&(c.fillStyle=z.createFillStyle(c,g.border,{x1:0,y1:0-f/2-d,x2:0,y2:0+f/2+d}),c.beginPath(),c.arc(0,0,f/2,Math.PI,0,!1),c.lineTo((f+d)/2,0),c.arc(0,0,f/2+d,0,Math.PI,!0),c.arc(0,0,f/2+d,Math.PI,0,!0),c.lineTo(f/2,0),c.arc(0,0,f/2,0,Math.PI,!1),c.closePath(),c.fill());f=l/2;q/=2;q>f&&(d=q,q=f,f=d);c.fillStyle=
D.hex2fill(g.x.color||g.x,g.x.opacity||1);c.rotate(x(45));c.beginPath();c.moveTo(0,0);c.lineTo(0,f);for(g=0;4>g;g++)c.lineTo(0,f),c.lineTo(q,f),c.lineTo(q,f-(f-q)),c.lineTo(f,q),c.lineTo(f,0),c.rotate(x(90));c.closePath();c.fill()},drawBubble:function(a){var b=this.getOrderLayout(),c=this.options.stem&&this.getAdjLayout(),f=this._hookPosition&&this._hookPosition.toLowerCase(),d=this.radius,l=this.border;a=a.options.stem&&a.options.stem.offset||{x:0,y:0};var q=0,g=0;d&&(q="background"==this.options.radius.position?
d:0,g="border"==this.options.radius.position?d:q+l);e(document.body).append(this.bubbleCanvas=document.createElement("canvas"));z.resize(this.bubbleCanvas,b.bubble.dimensions);z.init(this.bubbleCanvas);d=this.bubbleCanvas.getContext("2d");d.globalAlpha=this._globalAlpha;e(this.bubble).append(this.bubbleCanvas);d.fillStyle=z.createFillStyle(d,this.options.background,{x1:0,y1:b.background.position.top+l,x2:0,y2:b.background.position.top+b.background.dimensions.height-l});d.lineWidth=0;var p;p=this._drawBackgroundPath(d,
{beginPath:!0,closePath:!0,border:l,radius:q,borderRadius:g,layout:b,stemLayout:c,stem:this.options.stem,hookPosition:f,cornerOffset:a});d.fill();l&&(p=z.createFillStyle(d,this.options.border,{x1:0,y1:b.background.position.top,x2:0,y2:b.background.position.top+b.background.dimensions.height}),d.fillStyle=p,p=this._drawBackgroundPath(d,{beginPath:!0,closePath:!1,border:l,radius:q,borderRadius:g,layout:b,stemLayout:c,stem:this.options.stem,hookPosition:f,cornerOffset:a}),this._drawBorderPath(d,{beginPath:!1,
closePath:!0,border:l,backgroundRadius:q,radius:{size:g,position:this.options.radius.position},layout:b,stemLayout:c,stem:this.options.stem,hookPosition:f,cornerOffset:p.cornerOffset,corrections:p}),d.fill());this._corrections=p},_drawBackgroundPath:function(a,b){var c=e.extend({stem:!1,hookPosition:null,stemCorrection:null,beginPath:!1,closePath:!1,layout:null,stemLayout:null,radius:0,border:0,borderRadius:0,cornerOffset:{x:0,y:0}},b||{}),f=c.layout,d=c.stemLayout,l=c.cornerOffset,q=c.border,g=c.radius,
p=c.hookPosition,r=f.background.position,f=f.background.dimensions,m,u,h,t={x:Math.abs(this._stemCorrection.x),y:Math.abs(this._stemCorrection.y)},n=0,k=0,A={x:0,y:0};d&&(m=d.stem.dimensions,u=d.box.dimensions,h=c.borderRadius,A=q+g+.5*m.width-.5*d.border.dimensions.width,h=Math.ceil(h>A?h-A:0),A=I.nullifyCornerOffset(l,p,f,d.border.dimensions,q,g),l=A.offset,A=A.correction,n=Math.max(f.width-2*Math.max(h,l.x||0)-d.border.dimensions.width-(2*g||0),0),k=Math.max(f.height-2*Math.max(h,l.y||0)-d.border.dimensions.height-
(2*g||0),0),B.isCenter(p)&&(n*=.5,k*=.5),t.x=Math.min(t.x,n),t.y=Math.min(t.y,k),B.isCenter(p)&&(0>this._stemCorrection.x&&0<t.x&&(t.x*=-1),0>this._stemCorrection.y&&0<t.y&&(t.y*=-1)),this._adjustment&&this._adjustment.sides&&e.each(this._adjustment.sides,function(a,c){e.each(["top","right","bottom","left"],function(a,b){c==b&&(new RegExp("("+b+")$")).test(p)&&(t[/^(left|right)$/.test(b)?"x":"y"]=0)})}));d=g?r.left+q+g:r.left+q;n=r.top+q;l&&l.x&&/^(topleft|lefttop)$/.test(p)&&(d+=l.x);c.beginPath&&
a.beginPath();a.moveTo(d,n);if(c.stem)switch(p){case "topleft":d=r.left+q;g&&(d+=g);d+=Math.max(h,l.x||0);d+=t.x;a.lineTo(d,n);n-=m.height;d+=.5*m.width;a.lineTo(d,n);n+=m.height;d+=.5*m.width;a.lineTo(d,n);break;case "topmiddle":case "topcenter":d=r.left+.5*f.width-.5*m.width;d+=t.x;a.lineTo(d,n);n-=m.height;d+=.5*m.width;a.lineTo(d,n);n+=m.height;d+=.5*m.width;a.lineTo(d,n);d=r.left+.5*f.width-.5*u.width;a.lineTo(d,n);break;case "topright":d=r.left+f.width-q-m.width,g&&(d-=g),d-=Math.max(h,l.x||
0),d-=t.x,a.lineTo(d,n),n-=m.height,d+=.5*m.width,a.lineTo(d,n),n+=m.height,d+=.5*m.width,a.lineTo(d,n)}g?g&&(a.arc(r.left+f.width-q-g,r.top+q+g,g,x(-90),x(0),!1),d=r.left+f.width-q,n=r.top+q+g):(d=r.left+f.width-q,n=r.top+q,a.lineTo(d,n));if(c.stem)switch(p){case "righttop":n=r.top+q;g&&(n+=g);n+=Math.max(h,l.y||0);n+=t.y;a.lineTo(d,n);d+=m.height;n+=.5*m.width;a.lineTo(d,n);d-=m.height;n+=.5*m.width;a.lineTo(d,n);break;case "rightmiddle":case "rightcenter":n=r.top+.5*f.height-.5*m.width;n+=t.y;
a.lineTo(d,n);d+=m.height;n+=.5*m.width;a.lineTo(d,n);d-=m.height;n+=.5*m.width;a.lineTo(d,n);break;case "rightbottom":n=r.top+f.height-q,g&&(n-=g),n-=m.width,n-=Math.max(h,l.y||0),n-=t.y,a.lineTo(d,n),d+=m.height,n+=.5*m.width,a.lineTo(d,n),d-=m.height,n+=.5*m.width,a.lineTo(d,n)}g?g&&(a.arc(r.left+f.width-q-g,r.top+f.height-q-g,g,x(0),x(90),!1),d=r.left+f.width-q-g,n=r.top+f.height-q):(d=r.left+f.width-q,n=r.top+f.height-q,a.lineTo(d,n));if(c.stem)switch(p){case "bottomright":d=r.left+f.width-q;
g&&(d-=g);d-=Math.max(h,l.x||0);d-=t.x;a.lineTo(d,n);d-=.5*m.width;n+=m.height;a.lineTo(d,n);d-=.5*m.width;n-=m.height;a.lineTo(d,n);break;case "bottommiddle":case "bottomcenter":d=r.left+.5*f.width+.5*m.width;d+=t.x;a.lineTo(d,n);d-=.5*m.width;n+=m.height;a.lineTo(d,n);d-=.5*m.width;n-=m.height;a.lineTo(d,n);break;case "bottomleft":d=r.left+q+m.width,g&&(d+=g),d+=Math.max(h,l.x||0),d+=t.x,a.lineTo(d,n),d-=.5*m.width,n+=m.height,a.lineTo(d,n),d-=.5*m.width,n-=m.height,a.lineTo(d,n)}g?g&&(a.arc(r.left+
q+g,r.top+f.height-q-g,g,x(90),x(180),!1),d=r.left+q,n=r.top+f.height-q-g):(d=r.left+q,n=r.top+f.height-q,a.lineTo(d,n));if(c.stem)switch(p){case "leftbottom":n=r.top+f.height-q;g&&(n-=g);n-=Math.max(h,l.y||0);n-=t.y;a.lineTo(d,n);d-=m.height;n-=.5*m.width;a.lineTo(d,n);d+=m.height;n-=.5*m.width;a.lineTo(d,n);break;case "leftmiddle":case "leftcenter":n=r.top+.5*f.height+.5*m.width;n+=t.y;a.lineTo(d,n);d-=m.height;n-=.5*m.width;a.lineTo(d,n);d+=m.height;n-=.5*m.width;a.lineTo(d,n);break;case "lefttop":n=
r.top+q+m.width,g&&(n+=g),n+=Math.max(h,l.y||0),n+=t.y,a.lineTo(d,n),d-=m.height,n-=.5*m.width,a.lineTo(d,n),d+=m.height,n-=.5*m.width,a.lineTo(d,n)}g?g&&(a.arc(r.left+q+g,r.top+q+g,g,x(-180),x(-90),!1),d=r.left+q+g,n=r.top+q,d+=1,a.lineTo(d,n)):(d=r.left+q,n=r.top+q,a.lineTo(d,n));c.closePath&&a.closePath();return{x:d,y:n,stem:t,corner:A,cornerOffset:l}},_drawBorderPath:function(a,b){var c=e.extend({stem:!1,hookPosition:null,beginPath:!1,closePath:!1,layout:null,stemLayout:null,radius:0,border:0,
stemOffset:0,cornerOffset:{x:0,y:0},corrections:null},b||{}),f=c.layout,d=c.stemLayout,l=c.cornerOffset,q=c.border,g=c.radius&&c.radius.size||0,p=c.backgroundRadius,r=c.hookPosition,m=f.background.position,f=f.background.dimensions,u,h,t,n=c.corrections&&c.corrections.stem||{x:0,y:0};d&&(u=d.stem.dimensions,h=d.border.dimensions,t=q+p+.5*u.width-.5*h.width,t=Math.ceil(g>t?g-t:0));var d=m.left+q+p,k=m.top+q;p&&(d+=1);e.extend({},{x:d,y:k});c.beginPath&&a.beginPath();var A=e.extend({},{x:d,y:k}),k=
k-q;a.lineTo(d,k);g?g&&(a.arc(m.left+g,m.top+g,g,x(-90),x(-180),!0),d=m.left,k=m.top+g):(d=m.left,k=m.top,a.lineTo(d,k));if(c.stem)switch(r){case "lefttop":k=m.top+q;p&&(k+=p);k-=.5*h.width;k+=.5*u.width;k+=Math.max(t,l.y||0);k+=n.y;a.lineTo(d,k);d-=h.height;k+=.5*h.width;a.lineTo(d,k);d+=h.height;k+=.5*h.width;a.lineTo(d,k);break;case "leftmiddle":case "leftcenter":k=m.top+.5*f.height-.5*h.width;k+=n.y;a.lineTo(d,k);d-=h.height;k+=.5*h.width;a.lineTo(d,k);d+=h.height;k+=.5*h.width;a.lineTo(d,k);
break;case "leftbottom":k=m.top+f.height-q-h.width,p&&(k-=p),k+=.5*h.width,k-=.5*u.width,k-=Math.max(t,l.y||0),k-=n.y,a.lineTo(d,k),d-=h.height,k+=.5*h.width,a.lineTo(d,k),d+=h.height,k+=.5*h.width,a.lineTo(d,k)}g?g&&(a.arc(m.left+g,m.top+f.height-g,g,x(-180),x(-270),!0),d=m.left+g,k=m.top+f.height):(d=m.left,k=m.top+f.height,a.lineTo(d,k));if(c.stem)switch(r){case "bottomleft":d=m.left+q;p&&(d+=p);d-=.5*h.width;d+=.5*u.width;d+=Math.max(t,l.x||0);d+=n.x;a.lineTo(d,k);k+=h.height;d+=.5*h.width;a.lineTo(d,
k);k-=h.height;d+=.5*h.width;a.lineTo(d,k);break;case "bottommiddle":case "bottomcenter":d=m.left+.5*f.width-.5*h.width;d+=n.x;a.lineTo(d,k);k+=h.height;d+=.5*h.width;a.lineTo(d,k);k-=h.height;d+=.5*h.width;a.lineTo(d,k);d=m.left+.5*f.width+h.width;a.lineTo(d,k);break;case "bottomright":d=m.left+f.width-q-h.width,p&&(d-=p),d+=.5*h.width,d-=.5*u.width,d-=Math.max(t,l.x||0),d-=n.x,a.lineTo(d,k),k+=h.height,d+=.5*h.width,a.lineTo(d,k),k-=h.height,d+=.5*h.width,a.lineTo(d,k)}g?g&&(a.arc(m.left+f.width-
g,m.top+f.height-g,g,x(90),x(0),!0),d=m.left+f.width,k=m.top+f.width+g):(d=m.left+f.width,k=m.top+f.height,a.lineTo(d,k));if(c.stem)switch(r){case "rightbottom":k=m.top+f.height-q;k+=.5*h.width;k-=.5*u.width;p&&(k-=p);k-=Math.max(t,l.y||0);k-=n.y;a.lineTo(d,k);d+=h.height;k-=.5*h.width;a.lineTo(d,k);d-=h.height;k-=.5*h.width;a.lineTo(d,k);break;case "rightmiddle":case "rightcenter":k=m.top+.5*f.height+.5*h.width;k+=n.y;a.lineTo(d,k);d+=h.height;k-=.5*h.width;a.lineTo(d,k);d-=h.height;k-=.5*h.width;
a.lineTo(d,k);break;case "righttop":k=m.top+q,p&&(k+=p),k+=h.width,k-=.5*h.width-.5*u.width,k+=Math.max(t,l.y||0),k+=n.y,a.lineTo(d,k),d+=h.height,k-=.5*h.width,a.lineTo(d,k),d-=h.height,k-=.5*h.width,a.lineTo(d,k)}g?g&&(a.arc(m.left+f.width-g,m.top+g,g,x(0),x(-90),!0),k=m.top):(d=m.left+f.width,k=m.top,a.lineTo(d,k));if(c.stem)switch(r){case "topright":d=m.left+f.width-q;d+=.5*h.width-.5*u.width;p&&(d-=p);d-=Math.max(t,l.x||0);d-=n.x;a.lineTo(d,k);k-=h.height;d-=.5*h.width;a.lineTo(d,k);k+=h.height;
d-=.5*h.width;a.lineTo(d,k);break;case "topmiddle":case "topcenter":d=m.left+.5*f.width+.5*h.width;d+=n.x;a.lineTo(d,k);k-=h.height;d-=.5*h.width;a.lineTo(d,k);k+=h.height;d-=.5*h.width;a.lineTo(d,k);d=m.left+.5*f.width-h.width;a.lineTo(d,k);a.lineTo(d,k);break;case "topleft":d=m.left+q+h.width,d-=.5*h.width,d+=.5*u.width,p&&(d+=p),d+=Math.max(t,l.x||0),d+=n.x,a.lineTo(d,k),k-=h.height,d-=.5*h.width,a.lineTo(d,k),k+=h.height,d-=.5*h.width,a.lineTo(d,k)}a.lineTo(A.x,A.y-q);a.lineTo(A.x,A.y);c.closePath&&
a.closePath()},closeBtnMouseover:function(){var a=this.getPopover().options.closeBtn,a=a.diameter+2*a.border;e(this.defaultclosebtn).css({left:-1*a+"px"});e(this.hoverclosebtn).css({left:0})},closeBtnMouseout:function(){var a=this.getPopover().options.closeBtn,a=a.diameter+2*a.border;e(this.defaultclosebtn).css({left:0});e(this.hoverclosebtn).css({left:a+"px"})},getAdjLayout:function(){return I.getLayout(this,this.border)},getOrderLayout:function(){var a,b,c,e,d,l,q=this.getPopover(),g=this.contentDimensions,
p=q.options,r=this.radius,m=this.border,q=this.padding,g={width:2*m+2*q+g.width,height:2*m+2*q+g.height};this.options.stem&&this.getAdjLayout();var u=I.getBubbleLayout(this,g),q=u.dimensions,h=u.position,g=u.background.dimensions,t=u.background.position,n=0,k=0,A=q.width,v=q.height;p.closeBtn&&(d=r,"background"==p.radius.position&&(d+=m),n=d-Math.sin(x(45))*d,m="right",this._hookPosition.toLowerCase().match(/^(topright|righttop)$/)&&(m="left"),l=d=p=p.closeBtn.diameter+2*p.closeBtn.border,k=t.left-
p/2+("left"==m?n:g.width-n),n=t.top-p/2+n,"left"==m?0>k&&(p=Math.abs(k),A+=p,h.left+=p,k=0):(p=k+p-A,0<p&&(A+=p)),0>n&&(p=Math.abs(n),v+=p,h.top+=p,n=0),this.options.closeBtn.shadow&&(a=this.options.closeBtn.shadow,b=a.blur,p=a.offset,c=d+2*b,e=l+2*b,a=n-b+p.y,b=k-b+p.x,"left"==m?0>b&&(p=Math.abs(b),A+=p,h.left+=p,k+=p,b=0):(p=b+c-A,0<p&&(A+=p)),0>a&&(p=Math.abs(a),v+=p,h.top+=p,n+=p,a=0)));u=u.anchor;u.top+=h.top;u.left+=h.left;g={tooltip:{dimensions:{width:Math.ceil(A),height:Math.ceil(v)}},style:{dimensions:{width:Math.ceil(A),
height:Math.ceil(v)}},bubble:{dimensions:q,position:{top:Math.round(h.top),left:Math.round(h.left)}},background:{dimensions:{width:Math.ceil(g.width),height:Math.ceil(g.height)},position:{top:Math.round(t.top),left:Math.round(t.left)}},anchor:{top:Math.round(u.top),left:Math.round(u.left)},content:{position:{left:Math.ceil(h.left+t.left+this.border+this.options.padding),top:Math.ceil(h.top+t.top+this.border+this.options.padding)}}};this.options.closeBtn&&(g.closeBtn={dimensions:{width:Math.ceil(d),
height:Math.ceil(l)},position:{top:Math.round(n),left:Math.round(k)}},this.options.closeBtn.shadow&&(g.closebtnshd={dimensions:{width:Math.ceil(c),height:Math.ceil(e)},position:{top:Math.round(a),left:Math.round(b)}}));return g},order:function(){var a=this.getOrderLayout(),b=this.getPopover();e(b.container).css(w(a.tooltip.dimensions));e(b.styleElement).css(w(a.style.dimensions));this.ifrmshim&&this.ifrmshim.css(w(a.tooltip.dimensions));e(this.bubble).css(e.extend(w(a.bubble.dimensions),w(a.bubble.position)));
this.closeBtn&&(e(this.closeBtn).css(w(a.closeBtn.position)),a.closebtnshd&&e(this.closebtnshd.container).css(w(a.closebtnshd.position)));e(b.contentElement).css(w(a.content.position))},setGlobalAlpha:function(a){this._globalAlpha=a||0;this.shadow&&(this.shadow._globalAlpha=this._globalAlpha)},setOpacity:function(a){this.setGlobalAlpha(a);this.build()}}}());var F={shadows:{},get:function(a){if(!a)return null;var b=null;(a=e(a).data("wenpopover-uid"))&&(b=this.shadows[a]);return b},add:function(a){this.shadows[a.uid]=
a},remove:function(a){if(a=this.get(a))delete this.shadows[a.uid],a.remove()},transition:function(a){return Math.PI/2-Math.pow(a,Math.cos(a)*Math.PI)},Adj:{getBorderDimensions:function(a,b){var c=E.get(a.element).getAdjLayout().border.dimensions,c=this.getCenterBorderDimensions(c.width,c.height,b,{math:!1});return{width:c.width,height:c.height}},getCenterBorderDimensions2:function(a,b,c){var e=.5*a;c*=1/Math.cos(x(180-180*Math.acos(e/Math.sqrt(e*e+b*b))/Math.PI-90));e=2*(e+c);return{width:e,height:e/
a*b}},getCenterBorderDimensions:function(a,b,c){c*=Math.cos(x(180-180*Math.atan(b/a*.5)/Math.PI-90));c=a+2*c;return{width:c,height:c*b/a}},getLayout:function(a){var b=E.get(a.element),c=a.options.blur,f=B.isCorner(b._hookPosition);B.getOrientation(b._hookPosition);b=F.Adj.getBorderDimensions(a,c);b={box:{dimensions:{width:Math.ceil(b.width),height:Math.ceil(b.height)},position:{top:0,left:0}}};if(c){b.blurs=[];for(var d=0;d<=c;d++){var l=F.Adj.getBorderDimensions(a,d,{math:!1});b.blurs.push({position:{top:b.box.dimensions.height-
l.height,left:f?c-d:(b.box.dimensions.width-l.width)/2},dimensions:l})}}else b.blurs=[e.extend({},b.box)];return b},rotate:function(a,b,c){I.rotate(a,b.getStyle(),c)}}};e.extend(P.prototype,function(){return{prepare:function(){},remove:function(){this.cleanup()},cleanup:function(){this.container&&(e(this.container).remove(),this.container=this.bubble=this.background=this.stem=null,this._cache={})},build:function(){this.cleanup();this.prepare();var a=this.getPopover(),b=this.getStyle();this.container=
e("<div>").addClass("wpop_shd")[0];e(a.container).prepend(this.container);b.ifrmshim&&e(a.container).prepend(b.ifrmshim);b.getOrderLayout();e(this.container).css({top:0,left:0});this.drawBackground();this.order()},getPopover:function(){return v.get(this.element)[0]},getStyle:function(){return E.get(this.element)},getOrderLayout:function(){var a=this.getStyle(),b=a.getOrderLayout();this.getPopover();var c=this.options.blur,f=e.extend({},b.background.dimensions);f.width+=2*c;f.height+=2*c;var d;a.options.stem&&
(d=F.Adj.getLayout(this).box.dimensions,d=d.height);var l=I.getBubbleLayout(a,f,d);d=l.dimensions;var q=l.position,f=l.background.dimensions,l=l.background.position,g=b.bubble.position,p=b.background.position,c={top:g.top+p.top-(l.top+c)+this.options.offset.y,left:g.left+p.left-(l.left+c)+this.options.offset.x},g=b.anchor,p=b.style.dimensions,r={top:0,left:0};if(0>c.top){var m=Math.abs(c.top);r.top+=m;c.top=0;g.top+=m}0>c.left&&(m=Math.abs(c.left),r.left+=m,c.left=0,g.left+=m);return{tooltip:{dimensions:{height:Math.max(d.height+
c.top,p.height+r.top),width:Math.max(d.width+c.left,p.width+r.left)}},style:{dimensions:p,position:r},container:{dimensions:d,position:c},bubble:{dimensions:d,position:{top:Math.round(q.top),left:Math.round(q.left)}},background:{dimensions:{width:Math.ceil(f.width),height:Math.ceil(f.height)},position:{top:Math.round(l.top),left:Math.round(l.left)}},anchor:g,content:{position:{left:Math.ceil(r.left+b.bubble.position.left+b.background.position.left+a.border+a.padding),top:Math.ceil(r.top+b.bubble.position.top+
b.background.position.top+a.border+a.padding)}}}},getBlurOpacity:function(){return this.options.opacity/(this.options.blur+1)},drawBackground:function(){var a=this.getStyle(),b=a.getOrderLayout(),c=this.getPopover(),f=this.getOrderLayout(),d=this.options.blur,l=F.Adj.getLayout(this),q=a._hookPosition,g=B.getSide(q),p=d,r=d;if(c.options.stem){var m=l.blurs[l.blurs.length-1];"left"==g&&(r+=Math.ceil(m.dimensions.height));"top"==g&&(p+=Math.ceil(m.dimensions.height))}var u=a._cache.options,m=u.radius,
u=u.border;"background"==c.options.radius.position&&m&&(m+=u);c=f.bubble.dimensions;e(this.container).append(e(this.bubble=document.createElement("div")).addClass("wpop_shdbub").css(w(c))).css(w(c));e(document.body).append(e(this.bubbleCanvas=document.createElement("canvas")));z.resize(this.bubbleCanvas,f.bubble.dimensions);z.init(this.bubbleCanvas);f=this.bubbleCanvas.getContext("2d");f.globalAlpha=this._globalAlpha;e(this.bubble).append(this.bubbleCanvas);for(var c=d+1,h=0;h<=d;h++)f.fillStyle=
D.hex2fill(this.options.color,F.transition(1/c*h)*(this.options.opacity/c)),z.drawRoundedRectangle(f,{width:b.background.dimensions.width+2*h,height:b.background.dimensions.height+2*h,top:p-h,left:r-h,radius:m+h});if(a.options.stem){var h=l.blurs[0].dimensions,t=a.options.stem,d=u+.5*t.width,n=a.options.radius&&"background"==a.options.radius.position?a.options.radius.size||0:0;n&&(d+=n);u=u+n+.5*t.width-.5*h.width;h=a._corrections&&a._corrections.stem||{x:0,y:0};t=a._corrections&&a._corrections.corner||
{x:0,y:0};d+=Math.max(Math.ceil(m>u?m-u:0),a.options.stem.offset&&a.options.stem.offset[g&&/^(left|right)$/.test(g)?"y":"x"]||0);if("top"==g||"bottom"==g){switch(q){case "topleft":case "bottomleft":r+=d+h.x-t.x;break;case "topmiddle":case "topcenter":case "bottommiddle":case "bottomcenter":r+=.5*b.background.dimensions.width+h.x;break;case "topright":case "bottomright":r+=b.background.dimensions.width-(d-h.x+t.x)}"bottom"==g&&(p+=b.background.dimensions.height);h=0;for(a=l.blurs.length;h<a;h++)f.fillStyle=
D.hex2fill(this.options.color,F.transition(1/c*h)*(this.options.opacity/c)),d=l.blurs[h],f.beginPath(),"top"==g?(f.moveTo(r,p-h),f.lineTo(r-.5*d.dimensions.width,p-h),f.lineTo(r,p-h-d.dimensions.height),f.lineTo(r+.5*d.dimensions.width,p-h)):(f.moveTo(r,p+h),f.lineTo(r-.5*d.dimensions.width,p+h),f.lineTo(r,p+h+d.dimensions.height),f.lineTo(r+.5*d.dimensions.width,p+h)),f.closePath(),f.fill()}else{switch(q){case "lefttop":case "righttop":p+=d+h.y-t.y;break;case "leftmiddle":case "leftcenter":case "rightmiddle":case "rightcenter":p+=
.5*b.background.dimensions.height+h.y;break;case "leftbottom":case "rightbottom":p+=b.background.dimensions.height-(d-h.y+t.y)}"right"==g&&(r+=b.background.dimensions.width);h=0;for(a=l.blurs.length;h<a;h++)f.fillStyle=D.hex2fill(this.options.color,F.transition(1/c*h)*(this.options.opacity/c)),d=l.blurs[h],f.beginPath(),"left"==g?(f.moveTo(r-h,p),f.lineTo(r-h,p-.5*d.dimensions.width),f.lineTo(r-h-d.dimensions.height,p),f.lineTo(r-h,p+.5*d.dimensions.width)):(f.moveTo(r+h,p),f.lineTo(r+h,p-.5*d.dimensions.width),
f.lineTo(r+h+d.dimensions.height,p),f.lineTo(r+h,p+.5*d.dimensions.width)),f.closePath(),f.fill()}}},order:function(){var a=this.getOrderLayout(),b=this.getStyle(),c=this.getPopover();e(c.container).css(w(a.tooltip.dimensions));e(c.styleElement).css(e.extend(w(a.style.position),w(a.style.dimensions)));b.ifrmshim&&b.ifrmshim.css(w(a.tooltip.dimensions));if(c.options.closeBtn){var f=b.getOrderLayout(),d=a.style.position,l=f.closeBtn.position;e(b.closeBtn).css(w({top:d.top+l.top,left:d.left+l.left}));
c.options.closeBtn.shadow&&(f=f.closebtnshd.position,e(b.closebtnshd.container).css(w({top:d.top+f.top,left:d.left+f.left})))}e(this.container).css(e.extend(w(a.container.dimensions),w(a.container.position)));e(this.bubble).css(w(a.bubble.dimensions));e(c.contentElement).css(w(a.content.position))}}}());var R={shadows:{},get:function(a){return a?(a=e(a).data("wenpopover-uid"))?this.shadows[a]:null:null},add:function(a){this.shadows[a.uid]=a},remove:function(a){if(a=this.get(a))delete this.shadows[a.uid],
a.remove()}};e.extend(Q.prototype,function(){return{build:function(){this.cleanup();this.getPopover();var a=this.getStyle(),b=a.getOrderLayout().closeBtn.dimensions,c=e.extend({},b),f=this.options.blur;c.width+=2*f;c.height+=2*f;e(a.closeBtn).before(e(this.container=document.createElement("div")).addClass("wpop_closebtnshd"));e(document.body).append(e(this.closeBtnCanvas=document.createElement("canvas")));z.resize(this.closeBtnCanvas,c);z.init(this.closeBtnCanvas);a=this.closeBtnCanvas.getContext("2d");
a.globalAlpha=this._globalAlpha;e(this.container).append(this.closeBtnCanvas);for(var d=c.width/2,c=c.height/2,b=b.height/2,l=f+1,q=0;q<=f;q++)a.fillStyle=D.hex2fill(this.options.color,F.transition(1/l*q)*(this.options.opacity/l)),a.beginPath(),a.arc(d,c,b+q,x(0),x(360),!0),a.closePath(),a.fill()},remove:function(){this.cleanup()},cleanup:function(){this.container&&(e(this.container).remove(),this.container=null)},getPopover:function(){return v.get(this.element)[0]},getStyle:function(){return E.get(this.element)},
getBlurOpacity:function(){return this.options.opacity/(this.options.blur+1)}}}());var v={tooltips:{},options:{defaultStyle:"dark",startingZIndex:999999},stopDelegating:function(){var a=["click"];Wenpopover.support.touch&&(a.push("touchstart"),this._void&&e(document.body).unbind("click",this._void),this._void=null);e.each(a,function(a,c){e(document.documentElement).undelegate(".wpop_popover .wpop_close, .wpop_popover .close-tooltip",c)});this._onWindowResizeHandler&&(e(window).unbind("resize",this._onWindowResizeHandler),
this._onWindowResizeHandler=null);e(document).unbind("mousemove",v.Position._mouseBufferHandler)},startDelegating:function(){return function(){this.stopDelegating();var a=["click"];Wenpopover.support.touch&&(a.push("touchstart"),this._void=function(){},e(document.body).bind("click",this._void));e.each(a,function(a,c){e(document.documentElement).delegate(".wpop_popover .wpop_close, .wpop_popover .close-tooltip",c,function(a){a.preventDefault();a.stopPropagation();v.getByPopoverElement(e(a.target).closest(".wpop_popover")[0]).hide()})});
this._onWindowResizeHandler=e.proxy(this.onWindowResize,this);e(window).bind("resize",this._onWindowResizeHandler);e(document).bind("mousemove",v.Position._mouseBufferHandler)}}(),onWindowResize:function(){this._resizeTimer&&(window.clearTimeout(this._resizeTimer),this._resizeTimer=null);this._resizeTimer=y.delay(e.proxy(function(){var a=this.getVisible();e.each(a,function(a,c){c.position()})},this),200)},_getPopover:function(a){var b=e(a).data("wenpopover-uid"),c;b||(a=this.getByPopoverElement(e(a).closest(".wpop_popover")[0]))&&
a.element&&(b=e(a.element).data("wenpopover-uid"));if(b&&(c=this.tooltips[b]))return c},findElement:function(a){var b;y.isElement(a)&&(b=this._getPopover(a));return b&&b.element},get:function(a){var b=[];if(y.isElement(a)){var c=this._getPopover(a);c&&(b=[c])}else e.each(this.tooltips,function(c,d){d.element&&e(d.element).is(a)&&b.push(d)});return b},getByPopoverElement:function(a){if(!a)return null;var b=null;e.each(this.tooltips,function(c,e){e.getState("build")&&e.container===a&&(b=e)});return b},
getBySelector:function(a){var b=[];e.each(this.tooltips,function(c,f){f.element&&e(f.element).is(a)&&b.push(f)});return b},show:function(a){y.isElement(a)?(a=this.get(a)[0])&&a.show():e(a).each(e.proxy(function(a,c){var b=this.get(c)[0];b&&b.show()},this))},hide:function(a){y.isElement(a)?(a=this.get(a)[0])&&a.hide():e(a).each(e.proxy(function(a,c){var b=this.get(c)[0];b&&b.hide()},this))},toggle:function(a){y.isElement(a)?(a=this.get(a)[0])&&a.toggle():e(a).each(e.proxy(function(a,c){var b=this.get(c)[0];
b&&b.toggle()},this))},hideAll:function(){e.each(this.getVisible(),function(a,b){b.hide()})},refresh:function(a){y.isElement(a)?(a=this.get(a)[0])&&a.refresh():e(a).each(e.proxy(function(a,c){var b=this.get(c)[0];b&&b.refresh()},this))},getVisible:function(){var a=[];e.each(this.tooltips,function(b,c){c.visible()&&a.push(c)});return a},isVisibleByElement:function(a){var b=!1;y.isElement(a)&&e.each(this.getVisible()||[],function(c,e){if(e.element==a)return b=!0,!1});return b},getHighestPopover:function(){var a=
0,b;e.each(this.tooltips,function(c,e){e.zIndex>a&&(a=e.zIndex,b=e)});return b},resetZ:function(){1>=this.getVisible().length&&e.each(this.tooltips,function(a,b){b.getState("build")&&!b.options.zIndex&&e(b.container).css({zIndex:b.zIndex=+v.options.startingZIndex})})},add:function(a){this.tooltips[a.uid]=a},_remove:function(a){if(a=this._getPopover(a)){var b=e(a.element).data("wenpopover-uid");delete this.tooltips[b];a.hide();a.remove()}},remove:function(a){y.isElement(a)?this._remove(a):e(a).each(e.proxy(function(a,
c){this._remove(c)},this))},removeDetached:function(){e.each(this.tooltips,e.proxy(function(a,b){b.element&&!y.element.isAttached(b.element)&&this._remove(b.element)},this))},removeAll:function(){e.each(this.tooltips,e.proxy(function(a,b){b.element&&this._remove(b.element)},this));this.tooltips={}},setDefaultStyle:function(a){this.options.defaultStyle=a||"white"},setStartingZIndex:function(a){this.options.startingZIndex=a||0},clearAjaxCache:function(){e.each(this.tooltips,e.proxy(function(a,b){b._cache&&
b._cache.xhr&&(b._cache.xhr.abort(),b._cache.xhr=null);b.setState("updated",!1)},this));M.clear()},createOptions:function(){function a(a){return"string"==e.type(a)?{element:d.hideOn&&d.hideOn.element||f.hideOn.element,event:a}:C(e.extend({},f.hideOn),a)}function b(a){f=Wenpopover.Styles.basic;d=C(e.extend({},f),Wenpopover.Styles.reset);l=Wenpopover.Styles.closebtns.basic;q=C(e.extend({},l),Wenpopover.Styles.closebtns.reset);b=c;return c(a)}function c(c){c.style=c.style&&Wenpopover.Styles[c.style]?
c.style:Wenpopover.Styles[v.options.defaultStyle]?v.options.defaultStyle:"dark";var b=c.style?e.extend({},Wenpopover.Styles[c.style]||Wenpopover.Styles[v.options.defaultStyle]):{},b=C(e.extend({},d),b),b=C(e.extend({},b),c);if(b.ajax){var g=d.ajax||{},m=f.ajax;"boolean"==e.type(b.ajax)&&(b.ajax={cache:g.cache||m.cache,type:g.type||m.type});b.ajax=C(e.extend({},m),b.ajax)}b.background&&"string"==e.type(b.background)&&(b.background={color:b.background,opacity:1});b.border&&(g=d.border||{},m=f.border,
g="number"==e.type(b.border)?{size:b.border,color:g.color||m.color,opacity:g.opacity||m.opacity}:C(e.extend({},m),b.border),b.border=0===g.size?!1:g);b.radius&&(g="number"==e.type(b.radius)?{size:b.radius,position:d.radius&&d.radius.position||f.radius.position}:C(e.extend({},f.radius),b.radius),b.radius=0===g.size?!1:g);g=g=b.hook&&b.hook.target||"string"==e.type(b.hook)&&b.hook||d.hook&&d.hook.target||"string"==e.type(d.hook)&&d.hook||f.hook&&f.hook.target||f.hook;m=b.hook&&b.hook.tooltip||d.hook&&
d.hook.tooltip||f.hook&&f.hook.tooltip||v.Position.getInversedPosition(g);b.hook?"string"==e.type(b.hook)?g={target:b.hook,tooltip:v.Position.getPopoverPositionFromTarget(b.hook)}:(g={tooltip:m,target:g},b.hook.tooltip&&(g.tooltip=b.hook.tooltip),b.hook.target&&(g.target=b.hook.target)):g={tooltip:m,target:g};"mouse"==b.target&&("horizontal"==B.getOrientation(g.target)?g.target=g.target.replace(/(left|right)/,"middle"):g.target=g.target.replace(/(top|bottom)/,"middle"));b.hook=g;"mouse"==b.target?
(m=e.extend({},f.offset),e.extend(m,Wenpopover.Styles.reset.offset||{}),c.style&&e.extend(m,(Wenpopover.Styles[c.style]||Wenpopover.Styles[v.options.defaultStyle]).offset||{}),m=v.Position.adjustOffsetBasedOnHooks(f.offset,f.hook,g.target,!0),c.offset&&(m=e.extend(m,c.offset||{})),b.fadeOut=0):m={x:b.offset.x,y:b.offset.y};b.offset=m;if(b.closeBtn&&b.closeBtnStyle){c=e.extend({},Wenpopover.Styles.closebtns[b.closeBtnStyle]);var u=C(e.extend({},q),c);u.states&&e.each(["default","hover"],function(a,
b){var c=u.states[b],d=q.states&&q.states[b];if(c.background){var f=d&&d.background;"number"==e.type(c.background)?c.background={color:f&&f.color||l.states[b].background.color,opacity:c.background}:"string"==e.type(c.background)?(f=f&&"number"==e.type(f.opacity)&&f.opacity||l.states[b].background.opacity,c.background={color:c.background,opacity:f}):c.background=C(e.extend({},l.states[b].background),c.background)}c.border&&(d=d&&d.border,"number"==e.type(c.border)?c.border={color:d&&d.color||l.states[b].border.color,
opacity:c.border}:c.border=C(e.extend({},l.states[b].border),c.border))});u.shadow&&(c=q.shadow&&q.shadow.constructor&&q.shadow.constructor==Object?q.shadow:l.shadow,u.shadow.constructor&&u.shadow.constructor==Object&&(c=C(c,u.shadow)),u.shadow=c);b.closeBtn=u}b.shadow&&(c="boolean"==e.type(b.shadow)?d.shadow&&"boolean"==e.type(d.shadow)?f.shadow:d.shadow?d.shadow:f.shadow:C(e.extend({},f.shadow),b.shadow||{}),"number"==e.type(c.offset)&&(c.offset={x:c.offset,y:c.offset}),b.shadow=c);b.stem&&(c={},
c="boolean"==e.type(b.stem)?C({},f.stem):C(C({},f.stem),e.extend({},b.stem)),"number"==e.type(c.offset)&&(c.offset={x:c.offset,y:c.offset}),b.stem=c);b.containment&&("string"==e.type(b.containment)?b.containment={selector:b.containment,flip:!0}:"boolean"==e.type(b.containment)&&(b.containment=b.containment?{selector:"viewport",flip:!0}:!1));b.hideOn&&"click-outside"==b.hideOn&&(b.hideOnBeyondClick=!0,b.hideOn=!1);if(b.hideOn)if(e.isArray(b.hideOn)){var h=[];e.each(b.hideOn,function(b,c){h.push(a(c))});
b.hideOn=h}else b.hideOn=[a(b.hideOn)];b.showOn&&"string"==e.type(b.showOn)&&(b.showOn=[""+b.showOn]);b.padding=0;return b}var f,d,l,q;return b}()};v.Position=function(){function a(a,b){var c=B.split(a),d=c[1],c=c[2],f=B.getOrientation(a),h=e.extend({horizontal:!0,vertical:!0},b||{});"horizontal"==f?(h.vertical&&(d=r[d]),h.horizontal&&(c=r[c])):(h.vertical&&(c=r[c]),h.horizontal&&(d=r[d]));return d+c}function b(a,b){a.setHookPositionAndAdjCorrection(b.hook.tooltip,b.contained.correction,b.adjustment);
var c=b.position;e(a.container).css({top:c.top+"px",left:c.left+"px"})}function c(a){return a&&(/^mouse|click|touch$/.test("string"==typeof a.type&&a.type||"")||0<=a.pageX)}function f(a,b,c,d){var e=a>=c&&a<=d,f=b>=c&&b<=d;if(e&&f)return b-a;if(e&&!f)return d-a;if(!e&&f)return b-c;e=c>=a&&c<=b;f=d>=a&&d<=b;return e&&f?d-c:e&&!f?b-c:!e&&f?d-a:0}function d(a,b){var c=a.dimensions.width*a.dimensions.height;return c?f(a.position.left,a.position.left+a.dimensions.width,b.position.left,b.position.left+
b.dimensions.width)*f(a.position.top,a.position.top+a.dimensions.height,b.position.top,b.position.top+b.dimensions.height)/c:0}function l(a,b){var c=B.split(b),d={left:0,top:0};if("horizontal"==B.getOrientation(b)){switch(c[2]){case "middle":case "center":d.left=.5*a.width;break;case "right":d.left=a.width}"bottom"==c[1]&&(d.top=a.height)}else{switch(c[2]){case "middle":case "center":d.top=.5*a.height;break;case "bottom":d.top=a.height}"right"==c[1]&&(d.left=a.width)}return d}function q(a){var b=
y.element.cumulativeOffset(a);a=y.element.cumulativeScrollOffset(a);var c=e(window).scrollTop(),d=e(window).scrollLeft();b.left+=-1*(a.left-d);b.top+=-1*(a.top-c);return b}function g(b,f,g,n){var k,h,r=E.get(b.element),t=r.options,u=t.offset,x=c(g);x||!g?(h={width:24,height:24},x?(k=y.pointer(g),k={top:k.y-.5*h.height+6,left:k.x-.5*h.width+6}):(k=b._cache.event,k={top:(k?k.y:0)-.5*h.height+6,left:(k?k.x:0)-.5*h.width+6}),b._cache.event={x:k.left,y:k.top}):(k=q(g),h={width:e(g).outerWidth(),height:e(g).outerHeight()});
if(t.stem&&"mouse"!=t.target){var w=B.split(n);g=B.split(f);var z=B.getOrientation(n),C=r._cache.options,D=r.getAdjLayout().border.dimensions,H=C.radius,C=C.border,G=H&&"background"==t.radius.position?H:0,H=H&&"border"==t.radius.position?H:H+C,D=C+G+.5*t.stem.width-.5*D.width;sideOffset=Math.ceil(C+G+.5*t.stem.width+(H>D?H-D:0)+t.stem.offset["horizontal"==z?"x":"y"]);if("horizontal"==z&&"left"==w[2]&&"left"==g[2]||"right"==w[2]&&"right"==g[2])h.width-=2*sideOffset,k.left+=sideOffset;else if("vertical"==
z&&"top"==w[2]&&"top"==g[2]||"bottom"==w[2]&&"bottom"==g[2])h.height-=2*sideOffset,k.top+=sideOffset}g=e.extend({},k);w=x?a(t.hook.tooltip):t.hook.target;l(h,w);z=l(h,n);k={left:k.left+z.left,top:k.top+z.top};u=e.extend({},u);u=m(u,w,n,"mouse"==r.options.target);k.top+=u.y;k.left+=u.x;r=E.get(b.element);u=r._cache.hook;t=e.extend({},u[f]);D=x=0;w=B.split(n);"middle"!=w[2]&&(z=z=B.getOrientation(n),w=v.Position.getInversedPosition(n,"vertical"==z?{horizontal:!0,vertical:!1}:{horizontal:!1,vertical:!0}),
f==w&&(D=r._corrections.corner.y,x=r._corrections.corner.x));k={top:k.top-t.anchor.top-D,left:k.left-t.anchor.left-x};t.tooltip.position=k;w={horizontal:!0,vertical:!0};z={x:0,y:0};if(b.options.containment){if(t=p(b),b=(b.options.shadow?F.get(b.element):r).getOrderLayout().tooltip.dimensions,w.overlap=d({dimensions:b,position:k},t),1>w.overlap){if(k.left<t.position.left||k.left+b.width>t.position.left+t.dimensions.width)w.horizontal=!1,z.x=k.left<t.position.left?k.left-t.position.left:k.left+b.width-
(t.position.left+t.dimensions.width);if(k.top<t.position.top||k.top+b.height>t.position.top+t.dimensions.height)w.vertical=!1,z.y=k.top<t.position.top?k.top-t.position.top:k.top+b.height-(t.position.top+t.dimensions.height)}}else w.overlap=1;w.correction=z;b=u[f].bubble;h=d({dimensions:h,position:g},{dimensions:b.dimensions,position:{top:k.top+b.position.top,left:k.left+b.position.left}});return{position:k,overlap:{target:h},contained:w,hook:{tooltip:f,target:n}}}function p(a){var b={top:e(window).scrollTop(),
left:e(window).scrollLeft()},c=a.options,d=c.target;if("mouse"==d||"self"==d)d=a.element;a=e(d).closest(c.containment.selector).first()[0];if(!a||"viewport"==c.containment.selector)return{dimensions:U.viewport(),position:b};c=y.element.cumulativeOffset(a);d=y.element.cumulativeScrollOffset(a);c.left+=-1*(d.left-b.left);c.top+=-1*(d.top-b.top);return{dimensions:{width:e(a).innerWidth(),height:e(a).innerHeight()},position:c}}var r={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",
center:"center"},m=function(){var a=[[-1,-1],[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1],[1,1]],b={lefttop:0,topleft:0,topmiddle:1,topcenter:1,topright:2,righttop:2,rightmiddle:5,rightcenter:5,rightbottom:8,bottomright:8,bottommiddle:7,bottomcenter:7,bottomleft:6,leftbottom:6,leftmiddle:3,leftcenter:3};return function(c,d,e,f){var g=a[b[d]],h=a[b[e]],g=[Math.floor(.5*Math.abs(g[0]-h[0]))?-1:1,Math.floor(.5*Math.abs(g[1]-h[1]))?-1:1];B.isCenter(d)||!B.isCenter(e)||f||("horizontal"==B.getOrientation(e)?
g[0]=0:g[1]=0);return{x:g[0]*c.x,y:g[1]*c.y}}}();return{get:g,set:function(c,d,e,f,k){var h=g(c,d,e,f);/move$/.test(e&&"string"==typeof e.type?e.type:"");if(1!==h.contained.overlap){var l=!h.contained.horizontal,m=!h.contained.vertical;k={horizontal:!1,vertical:!1};var n=B.getOrientation(d);if((k.vertical="horizontal"==n&&m)||(k.horizontal="vertical"==n&&l))if(d=a(d,k),f=a(f,k),h=g(c,d,e,f),1===h.contained.overlap)return b(c,h),h;e=h;d=p(c);f=d.dimensions;d=d.position;k=E.get(c.element)._cache.hook[e.hook.tooltip].tooltip.dimensions;
h=e.position;l={top:0,left:0,sides:[]};d.left>h.left&&(l.left=d.left-h.left,l.sides.push("left"),e.position.left=d.left);d.top>h.top&&(l.top=h.top-d.top,l.sides.push("top"),e.position.top=d.top);d.left+f.width<h.left+k.width&&(l.left=d.left+f.width-(h.left+k.width),l.sides.push("right"),e.position.left=d.left+f.width-k.width);d.top+f.height<h.top+k.height&&(l.top=d.top+f.height-(h.top+k.height),l.sides.push("bottom"),e.position.top=d.top+f.height-k.height);e.adjustment=l;h=e}b(c,h);return h},getInversedPosition:a,
getPopoverPositionFromTarget:function(b){b=B.split(b);return a(b[1]+r[b[2]])},getAbsoluteOffset:q,adjustOffsetBasedOnHooks:m,isPointerEvent:c}}();v.Position.mouseBuffer={x:0,y:0};v.Position._mouseBufferHandler=function(a){v.Position.mouseBuffer={x:a.pageX,y:a.pageY}};v.RefreshAnt=function(){function a(a){return{width:e(a).innerWidth(),height:e(a).innerHeight()}}function b(b){var c=a(b),d=b.parentNode;d&&e(d).css({width:c.width+"px"})&&a(b).height>c.height&&c.width++;e(d).css({width:"100%"});return c}
return{build:function(){e(document.body).append(e(document.createElement("div")).addClass("wpop_refreshant").append(e(document.createElement("div")).addClass("wpop_popover").append(e(this.container=document.createElement("div")).addClass("wpop_content"))))},update:function(a,b,d,l){(!this.container||this.container&&!y.element.isAttached(this.container))&&this.build();var c=a.options;e.extend({},l||{});!c.inline&&!y.isElement(b)||e(b).data("isWenloader")||(c.inline&&"string"==e.type(b)&&(a.inlineContent=
e("#"+b)[0],b=a.inlineContent),!a.inlineMarker&&b&&y.element.isAttached(b)&&(e(a.inlineContent).data("wenpopover_restore_inline_display",e(a.inlineContent).css("display")),a.inlineMarker=document.createElement("div"),e(a.inlineContent).before(e(a.inlineMarker).hide())));var f=document.createElement("div");e(this.container).append(e(f).addClass("wpop_contentwrap wpop_clearfix").append(b));y.isElement(b)&&e(b).show();c.style&&e(f).addClass("wpop_content_"+a.options.style);var p=e(f).find("img[src]").filter(function(){return!(e(this).attr("height")&&
e(this).attr("width"))});if(0<p.length&&!a.getState("preloading_images")){a.setState("preloading_images",!0);var r=0;b=Math.max(8E3,750*(p.length||0));a.clearTimer("preloading_images");a.setTimer("preloading_images",e.proxy(function(){p.each(function(){this.onload=function(){}});r>=p.length||(this._updatePopover(a,f),d&&d())},this),b);e.each(p,e.proxy(function(b,c){var g=new Image;g.onload=e.proxy(function(){g.onload=function(){};var b=g.width,h=g.height,k=e(c).attr("width"),l=e(c).attr("height");
k&&l||(!k&&l?(b=Math.round(l*b/h),h=l):!l&&k&&(h=Math.round(k*h/b),b=k),e(c).attr({width:b,height:h}),r++);r==p.length&&(a.clearTimer("preloading_images"),a.getState("visible")&&e(a.container).hide(),this._updatePopover(a,f),d&&d())},this);g.src=c.src},this))}else this._updatePopover(a,f),d&&d()},_updatePopover:function(a,f){var c=b(f),l=c.width-(parseInt(e(f).css("padding-left"))||0)-(parseInt(e(f).css("padding-right"))||0);parseInt(e(f).css("padding-top"));parseInt(e(f).css("padding-bottom"));a.options.maxWidth&&
"number"==e.type(a.options.maxWidth)&&l>a.options.maxWidth&&(e(f).css({width:a.options.maxWidth+"px"}),c=b(f));a._cache.contentDimensions=c;e(a.contentElement).html(f)},getMeasureElementDimensions:b}}();e.extend(K.prototype,function(){return{build:function(){this.getState("build")||(e(document.body).append(e(this.container).css({left:"-10000px",top:"-10000px",zIndex:this.zIndex}).append(e(this.styleElement=document.createElement("div")).addClass("wpop_style")).append(e(this.contentElement=document.createElement("div")).addClass("wpop_content"))),
e(this.container).addClass("wpop_popover_"+this.options.style),this.options.hideOnBeyondClick&&(e(this.element).addClass("wpop_hobc"),this.setEvent(document.documentElement,"click",e.proxy(function(a){this.visible()&&(a=e(a.target).closest(".wpop_popover, .wpop_hobc")[0],(!a||a&&a!=this.container&&a!=this.element)&&this.hide())},this))),Wenpopover.support.cssTransitions&&(this.options.fadeIn||this.options.fadeOut)&&(this.setFadeDuration(this.options.fadeIn),e(this.container).addClass("wpop_hidden")),
this.createPostBuildObservers(),this.setState("build",!0),v.add(this))},_preBuild:function(){e(this.container=document.createElement("div")).addClass("wpop_popover");this.createPreBuildObservers()},_buildStyle:function(){this.build();var a=E.get(this.element);a?a.build():(new O(this.element),this.setState("styled",!0))},createPreBuildObservers:function(){this.setEvent(this.element,"mouseenter",this.setActive);this.setEvent(this.element,"mouseleave",e.proxy(function(a){this.setIdle(a)},this));this.options.showOn&&
e.each(this.options.showOn,e.proxy(function(a,c){var b=!1;"click"==c&&(this.options.hideOn&&e.each(this.options.hideOn,function(a,c){if("self"==c.element&&"click"==c.event)return b=!0,!1}),this.setState("toggles",b));this.setEvent(this.element,c,"click"==c?b?this.toggle:this.show:e.proxy(function(){this.showDelayed()},this))},this));this.options.hideOn?e.each(this.options.hideOn,e.proxy(function(a,c){var b;switch(c.element){case "self":if(this.getState("toggles")&&"click"==c.event)return;b=this.element;
break;case "target":b=this.target}b&&this.setEvent(b,c.event,"click"==c.event?this.hide:e.proxy(function(){this.hideDelayed()},this))},this)):this.options.showDelay&&this.options.showOn&&-1< !e.inArray("click",this.options.showOn)&&this.setEvent(this.element,"mouseleave",e.proxy(function(){this.clearTimer("show")},this));var a=!1;!this.options.fixed&&this.options.showOn&&((a=-1<e.inArray("mousemove",this.options.showOn))||-1<e.inArray("touchmove",this.options.showOn))&&"mouse"==this.target&&this.setEvent(this.element,
a?"mousemove":"touchmove",function(a){this.getState("styled")&&this.position(a)})},createPostBuildObservers:function(){this.setEvent(this.container,Wenpopover.support.touch?"touchmove":"mouseenter",this.setActive);this.setEvent(this.container,"mouseleave",this.setIdle);this.setEvent(this.container,Wenpopover.support.touch?"touchmove":"mouseenter",e.proxy(function(){this.getTimer("fadeTransition")||this.show()},this));this.options.hideOn&&e.each(this.options.hideOn,e.proxy(function(a,b){var c;switch(b.element){case "tooltip":c=
this.container}c&&this.setEvent(c,b.event,b.event.match(/^(click|mousemove|mouseenter)$/)?this.hide:e.proxy(function(){this.hideDelayed()},this))},this))},show:function(a){this.clearTimer("hide");this.clearTimer("fadeTransition");if(!this.visible()){if("function"==e.type(this.content)||"function"==e.type(this._cache.contentFunction)){"function"!=e.type(this._cache.contentFunction)&&(this._cache.contentFunction=this.content);var b=this._cache.contentFunction(this.element)||!1;b!=this._cache.fnCallContent&&
(this._cache.fnCallContent=b,this.setState("updated",!1),this._restoreInlineContent());this.content=b;if(!b)return}this.options.hideOthers&&v.hideAll();this.setState("visible",!0);this.options.ajax?this.ajaxUpdate(a):this.getState("updated")||this.update(this.content);this.getState("styled")&&this.position(a);this.raise();this.options.hideAfter&&y.defer(e.proxy(function(){this.setActive()},this));if("function"==e.type(this.options.onShow)&&(!this.options.ajax||this.options.ajax&&this.options.ajax.cache&&
this.getState("updated")))this.options.onShow(this.contentElement.firstChild,this.element);Wenpopover.support.cssTransitions&&(this.options.fadeIn||this.options.fadeOut)&&(this.setFadeDuration(this.options.fadeIn),e(this.container).addClass("wpop_visible").removeClass("wpop_hidden"));e(this.container).show()}},hide:function(){this.clearTimer("show");this.getState("visible")&&(this.setState("visible",!1),Wenpopover.support.cssTransitions&&(this.options.fadeIn||this.options.fadeOut)?(this.setFadeDuration(this.options.fadeOut),
e(this.container).removeClass("wpop_visible").addClass("wpop_hidden"),this.setTimer("fadeTransition",e.proxy(this._hide,this),this.options.fadeOut)):this._hide(),this._cache.xhr&&(this._cache.xhr.abort(),this._cache.xhr=null,this.setState("xhr",!1)))},_hide:function(){if(this.getState("build")&&(e(this.container).css({left:"-10000px",top:"-10000px"}),v.resetZ(),"function"==e.type(this.options.onHide)))this.options.onHide(this.contentElement.firstChild,this.element)},toggle:function(a){this[this.visible()?
"hide":"show"](a)},visible:function(){return this.getState("visible")},showDelayed:function(a){this.clearTimer("hide");this.clearTimer("fadeTransition");this.getState("visible")||this.getTimer("show")||this.setTimer("show",e.proxy(function(){this.clearTimer("show");this.show(a)},this),this.options.showDelay||1)},hideDelayed:function(){this.clearTimer("show");!this.getTimer("hide")&&this.getState("visible")&&this.setTimer("hide",e.proxy(function(){this.clearTimer("hide");this.clearTimer("fadeTransition");
this.hide()},this),this.options.hideDelay||1)},setFadeDuration:function(a){if(Wenpopover.support.cssTransitions){a=a||0;var b=this.container.style;b.MozTransitionDuration=a+"ms";b.webkitTransitionDuration=a+"ms";b.OTransitionDuration=a+"ms";b.transitionDuration=a+"ms"}},setState:function(a,b){this._cache.states[a]=b},getState:function(a){return this._cache.states[a]},setActive:function(){this.setState("active",!0);this.getState("visible")&&this.raise();this.options.hideAfter&&this.clearTimer("idle")},
setIdle:function(){this.setState("active",!1);this.options.hideAfter&&this.setTimer("idle",e.proxy(function(){this.clearTimer("idle");this.getState("active")||this.hide()},this),this.options.hideAfter)},getTimer:function(a){return this._cache.timers[a]},setTimer:function(a,b,c){this._cache.timers[a]=y.delay(b,c)},clearTimer:function(a){this._cache.timers[a]&&(window.clearTimeout(this._cache.timers[a]),delete this._cache.timers[a])},clearTimers:function(){e.each(this._cache.timers,function(a,b){window.clearTimeout(b)});
this._cache.timers=[]},setEvent:function(a,b,c,f){c=e.proxy(c,f||this);this._cache.events.push({element:a,eventName:b,handler:c});e(a).bind(b,c)},clearEvents:function(){e.each(this._cache.events,function(a,b){e(b.element).unbind(b.eventName,b.handler)})},setHookPositionAndAdjCorrection:function(a,b,c){var e=E.get(this.element);e&&e.setHookPositionAndAdjCorrection(a,b,c)},setHookPosition:function(a){var b=E.get(this.element);b&&b.setHookPosition(a)},resetHookPosition:function(){this.setHookPosition(this.options.hook.tooltip)},
refresh:function(){var a=E.get(this.element);a&&(a.refresh(),this.visible()&&this.position())},update:function(a,b){var c=e.extend({},b||{});this.build();this.getState("visible")&&e(this.container).hide();v.RefreshAnt.update(this,a,e.proxy(function(){var a=this.getState("visible");a||this.setState("visible",!0);this._buildStyle();a||this.setState("visible",!1);this.getState("visible")&&(e(this.container).hide(),this.position(),this.raise(),e(this.container).show());this.setState("updated",!0);c.afterUpdate&&
c.afterUpdate(this.contentElement.firstChild,this.element);c.callback&&c.callback()},this),{})},ajaxUpdate:function(a){var b,c={url:this.content,type:this.options.ajax.type,data:this.options.ajax.data||{},dataType:this.options.ajax.dataType||"html"};this.getState("xhr")||this.options.ajax.cache&&this.getState("updated")||(this.options.ajax.cache&&(b=M.get(c))?this.afterAjaxUpdate(b,{callback:e.proxy(function(){if(this.getState("visible")&&this.options.onShow)this.options.onShow(this.contentElement.firstChild,
this.element)},this)}):(this.setState("xhr",!0),this._cache.xhr&&(this._cache.xhr.abort(),this._cache.xhr=null),this._cache.xhr=e.ajax(e.extend({},c,{success:e.proxy(function(a,b,l){0!==l.status&&(M.set(c,l.responseText),this.afterAjaxUpdate(l.responseText,{callback:e.proxy(function(){this.setState("xhr",!1);if(this.getState("visible")&&this.options.onShow)this.options.onShow(this.contentElement.firstChild,this.element)},this)}))},this)}))))},afterAjaxUpdate:function(a,b){var c=e.extend({},b||{});
this.update(a,c)},position:function(a){if(this.visible()){var b;if("mouse"==this.options.target){b=v.Position.isPointerEvent(a);var c=v.Position.mouseBuffer;b?c.x||c.y?(this._cache.event={x:c.x,y:c.y},b=null):b=a:(c.x||c.y?this._cache.event={x:c.x,y:c.y}:this._cache.event||(b=v.Position.getAbsoluteOffset(this.element),this._cache.event={x:b.left,y:b.top}),b=null)}else b=this.target;v.Position.set(this,this.options.hook.tooltip,b,this.options.hook.target);if(a&&v.Position.isPointerEvent(a)){var c=
e(this.container).outerWidth(),f=e(this.container).outerHeight();a=y.pointer(a);b=y.element.cumulativeOffset(this.container);a.x>=b.left&&a.x<=b.left+c&&a.y>=b.top&&a.y<=b.top+f&&y.defer(e.proxy(function(){this.clearTimer("hide")},this))}}},raise:function(){if(this.getState("build")&&!this.options.zIndex){var a=v.getHighestPopover();a&&a!=this&&this.zIndex<=a.zIndex&&e(this.container).css({zIndex:this.zIndex=a.zIndex+1})}},_restoreInlineContent:function(){var a;this.inlineMarker&&this.inlineContent&&
((a=e(this.inlineContent).data("wenpopover_restore_inline_display"))&&e(this.inlineContent).css({display:a}),e(this.inlineMarker).before(this.inlineContent).remove(),this.inlineMarker=null)},remove:function(){y.defer(e.proxy(function(){this.clearEvents()},this));this.clearTimers();this._restoreInlineContent();y.defer(e.proxy(function(){e(this.container).find("img[src]").unbind("load")},this));E.remove(this.element);this.getState("build")&&this.container&&(e(this.container).remove(),this.container=
null);var a;(a=e(this.element).data("wenpopover_restore_title"))&&e(this.element).attr("title",a).removeData("wenpopover_restore_title");e(this.element).removeData("wenpopover-uid")}}}());Wenpopover.init()})(jQuery);

/**!
 * MessiJS - A easy to use message plugin for jQuery
 * @version 2.0.1
 * @link https://MessiJS.github.io/
 * @license MIT
 * @copyright Copyright 2012-13 Marcos Espern
 * @copyright Copyright 2014 Kevin Gustavson
 */
function Messi(data,options){var _this=this;_this.options=jQuery.extend({},Messi.prototype.options,options||{});_this.messi=jQuery(_this.template);_this.setContent(data);if(_this.options.title==null){jQuery(".messi-titlebox",_this.messi).remove()}else{jQuery(".messi-title",_this.messi).append(_this.options.title);if(_this.options.buttons.length===0||!_this.options.autoclose){if(_this.options.closeButton){var close=jQuery('<a class="messi-closebtn">&times;</a>');close.on("click",function(){_this.hide()});jQuery(".messi-titlebox",this.messi).prepend(close)}}if(_this.options.titleClass!=null){jQuery(".messi-titlebox",this.messi).addClass(_this.options.titleClass)}}if(_this.options.width!=null){jQuery(".messi-box",_this.messi).css("width",_this.options.width)}if(_this.options.buttons.length>0){for(var i=0;i<_this.options.buttons.length;i++){var cls=(_this.options.buttons[i]["class"])?_this.options.buttons[i]["class"]:"";var btn=jQuery('<div class="btnbox"><a class="btn '+cls+'"> '+_this.options.buttons[i].label+"</a></div>").data("value",_this.options.buttons[i].val);btn.on("click",function(){var value=jQuery.data(this,"value");var after=(_this.options.callback!=null)?function(){_this.options.callback(value)}:null;_this.hide(after)});jQuery(".messi-actions",this.messi).append(btn)}}else{jQuery(".messi-footbox",this.messi).remove()}_this.modal=(_this.options.modal)?jQuery('<div class="messi-modal"></div>').css({opacity:_this.options.modalOpacity,width:jQuery(document).width(),height:jQuery(document).height(),"z-index":_this.options.zIndex+jQuery(".messi").length}).appendTo(document.body):null;if(_this.options.show){_this.show()}jQuery(window).on("resize",function(){_this.resize()});if(_this.options.autoclose!=null){setTimeout(function(_this){_this.hide()},_this.options.autoclose,this)}return _this}Messi.prototype={options:{autoclose:null,buttons:[],callback:null,center:true,closeButton:true,height:"auto",title:null,titleClass:null,modal:false,modalOpacity:0.8,show:true,unload:true,viewport:{top:"0px",left:"0px"},width:"",zIndex:7777},template:'<div class="messi"><div class="messi-box"><div class="messi-wrapper"><div class="messi-titlebox"><span class="messi-title"></span></div><div class="messi-content"></div><div class="messi-footbox clearfix"><div class="messi-actions clearfix"></div></div></div></div></div>',content:"<div></div>",visible:false,setContent:function(data){jQuery(".messi-content",this.messi).css({height:this.options.height}).empty().append(data)},viewport:function(){return{top:((jQuery(window).height()-this.messi.height())/2)+jQuery(window).scrollTop()+"px",left:((jQuery(window).width()-this.messi.width())/2)+jQuery(window).scrollLeft()+"px"}},show:function(){if(this.visible){return}if(this.options.modal&&this.modal!=null){this.modal.show()}this.messi.appendTo(document.body);if(this.options.center){this.options.viewport=this.viewport(jQuery(".messi-box",this.messi))}this.messi.css({top:this.options.viewport.top,left:this.options.viewport.left,"z-index":this.options.zIndex+jQuery(".messi").length}).show().animate({opacity:1},200);this.visible=true},hide:function(after){if(!this.visible){return}var _this=this;if(after){after.call()}this.messi.animate({opacity:0},200,function(){if(_this.options.modal&&_this.modal!=null){_this.modal.remove()}_this.messi.css({display:"none"}).remove();_this.visible=false;if(_this.options.unload){_this.unload()}});return this},resize:function(){if(this.options.modal){jQuery(".messi-modal").css({width:jQuery(document).width(),height:jQuery(document).height()})}if(this.options.center){this.options.viewport=this.viewport(jQuery(".messi-box",this.messi));this.messi.css({top:this.options.viewport.top,left:this.options.viewport.left})}},toggle:function(){this[this.visible?"hide":"show"]();return this},unload:function(){if(this.visible){this.hide()}jQuery(window).off("resize",function(){this.resize()});this.messi.remove()}};jQuery.extend(Messi,{alert:function(data,callback,options){var buttons=[{id:"ok",label:"OK",val:"OK"}];options=jQuery.extend({closeButton:false,buttons:buttons,callback:function(){}},options||{},{show:true,unload:true,callback:callback});return new Messi(data,options)},ask:function(data,callback,options){var buttons=[{id:"yes",label:"Yes",val:"Y","class":"btn-success"},{id:"no",label:"No",val:"N","class":"btn-danger"}];options=jQuery.extend({closeButton:false,modal:true,buttons:buttons,callback:function(){}},options||{},{show:true,unload:true,callback:callback});return new Messi(data,options)},img:function(src,options){var img=new Image();jQuery(img).load(function(){var vp={width:jQuery(window).width()-50,height:jQuery(window).height()-50};var ratio=(this.width>vp.width||this.height>vp.height)?Math.min(vp.width/this.width,vp.height/this.height):1;jQuery(img).css({width:this.width*ratio,height:this.height*ratio});options=jQuery.extend(options||{},{show:true,unload:true,closeButton:true,width:this.width*ratio,height:this.height*ratio,padding:0});new Messi(img,options)}).error(function(){console.log("Error loading "+src)}).attr("src",src)},load:function(url,params,options,callback){var buttons=[];options=jQuery.extend({closeButton:true,modal:true,buttons:buttons,title:""},options||{},{show:true,unload:true,callback:callback});var request={type:"post",url:url,data:params,cache:false,error:function(request,status,error){console.log(request.responseText)},success:function(html){new Messi(html,options)}};jQuery.ajax(request)}});


/**
 * Really Simple Color Picker in jQuery
 *
 * Licensed under the MIT (MIT-LICENSE.txt) licenses.
 *
 * Copyright (c) 2008-2012
 * Lakshan Perera (www.laktek.com) & Daniel Lacy (daniellacy.com)
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 */

(function($){var selectorOwner,activePalette,cItterate=0,templates={control:$('<div class="colorPicker-picker">&nbsp;</div>'),palette:$('<div id="colorPicker_palette" class="colorPicker-palette" />'),swatch:$('<div class="colorPicker-swatch">&nbsp;</div>'),hexLabel:$('<label for="colorPicker_hex">Hex</label>'),hexField:$('<input type="text" id="colorPicker_hex" />')},transparent="transparent",lastColor;$.fn.colorPicker=function(options){return this.each(function(){var element=$(this),opts=$.extend({},
$.fn.colorPicker.defaults,options),defaultColor=$.fn.colorPicker.toHex(element.val().length>0?element.val():opts.pickerDefault),newControl=templates.control.clone(),newPalette=templates.palette.clone().attr("id","colorPicker_palette-"+cItterate),newHexLabel=templates.hexLabel.clone(),newHexField=templates.hexField.clone(),paletteId=newPalette[0].id,swatch,controlText;$.each(opts.colors,function(i){swatch=templates.swatch.clone();if(opts.colors[i]===transparent){swatch.addClass(transparent).text("X");
$.fn.colorPicker.bindPalette(newHexField,swatch,transparent)}else{swatch.css("background-color","#"+this);$.fn.colorPicker.bindPalette(newHexField,swatch)}swatch.appendTo(newPalette)});newHexLabel.attr("for","colorPicker_hex-"+cItterate);newHexField.attr({"id":"colorPicker_hex-"+cItterate,"value":defaultColor});newHexField.bind("keydown",function(event){if(event.keyCode===13){var hexColor=$.fn.colorPicker.toHex($(this).val());$.fn.colorPicker.changeColor(hexColor?hexColor:element.val())}if(event.keyCode===
27)$.fn.colorPicker.hidePalette()});newHexField.bind("keyup",function(event){var hexColor=$.fn.colorPicker.toHex($(event.target).val());$.fn.colorPicker.previewColor(hexColor?hexColor:element.val())});$('<div style="display:none;" class="colorPicker_hexWrap" />').append(newHexLabel).appendTo(newPalette);newPalette.find(".colorPicker_hexWrap").append(newHexField);if(opts.showHexField===false){newHexField.hide();newHexLabel.hide()}$("body").append(newPalette);newPalette.hide();newControl.css("background-color",
defaultColor);newControl.bind("click",function(){if(element.is(":not(:disabled)"))$.fn.colorPicker.togglePalette($("#"+paletteId),$(this))});if(options&&options.onColorChange)newControl.data("onColorChange",options.onColorChange);else newControl.data("onColorChange",function(){});if(controlText=element.data("text"))newControl.html(controlText);element.after(newControl);element.bind("change",function(){element.next(".colorPicker-picker").css("background-color",$.fn.colorPicker.toHex($(this).val()))});
element.val(defaultColor);if(element[0].tagName.toLowerCase()==="input")try{element.attr("type","hidden")}catch(err){element.css("visibility","hidden").css("position","absolute")}else element.hide();cItterate++})};$.extend(true,$.fn.colorPicker,{toHex:function(color){if(color.match(/[0-9A-F]{6}|[0-9A-F]{3}$/i))return color.charAt(0)==="#"?color:"#"+color;else if(color.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/)){var c=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,
10)],pad=function(str){if(str.length<2)for(var i=0,len=2-str.length;i<len;i++)str="0"+str;return str};if(c.length===3){var r=pad(c[0].toString(16)),g=pad(c[1].toString(16)),b=pad(c[2].toString(16));return"#"+r+g+b}}else return false},checkMouse:function(event,paletteId){var selector=activePalette,selectorParent=$(event.target).parents("#"+selector.attr("id")).length;if(event.target===$(selector)[0]||event.target===selectorOwner[0]||selectorParent>0)return;$.fn.colorPicker.hidePalette()},hidePalette:function(){$(document).unbind("mousedown",
$.fn.colorPicker.checkMouse);$(".colorPicker-palette").hide()},showPalette:function(palette){var hexColor=selectorOwner.prev("input").val();palette.css({top:selectorOwner.offset().top+selectorOwner.outerHeight(),left:selectorOwner.offset().left});$("#color_value").val(hexColor);palette.show();$(document).bind("mousedown",$.fn.colorPicker.checkMouse)},togglePalette:function(palette,origin){if(origin)selectorOwner=origin;activePalette=palette;if(activePalette.is(":visible"))$.fn.colorPicker.hidePalette();
else $.fn.colorPicker.showPalette(palette)},changeColor:function(value){selectorOwner.css("background-color",value);selectorOwner.prev("input").val(value).change();$.fn.colorPicker.hidePalette();selectorOwner.data("onColorChange").call(selectorOwner,$(selectorOwner).prev("input").attr("id"),value)},previewColor:function(value){selectorOwner.css("background-color",value)},bindPalette:function(paletteInput,element,color){color=color?color:$.fn.colorPicker.toHex(element.css("background-color"));element.bind({click:function(ev){lastColor=
color;$.fn.colorPicker.changeColor(color)},mouseover:function(ev){lastColor=paletteInput.val();$(this).css("border-color","#598FEF");paletteInput.val(color);$.fn.colorPicker.previewColor(color)},mouseout:function(ev){$(this).css("border-color","#e0e0e0");paletteInput.val(selectorOwner.css("background-color"));paletteInput.val(lastColor);$.fn.colorPicker.previewColor(lastColor)}})}});$.fn.colorPicker.defaults={pickerDefault:"FFFFFF",colors:["#f7dff7","#ffe6ea","#f5ebdc","#f7f5df","#e1e1fa","#e3f0fc","#e1fafa","#e1fae1","#ffd700","#f3f32b","#e8d974","#dce775","#b9de7a","#75d586","#66c2a5","#2edb2e","#87c4de",
"#4eb3d3","#1ddbdb","#589ded","#1f7cff","#cc87de","#9c87de","#808bd3","#fdb462","#fb8072","#d971a1","#f05ea3","#f75454","#cc35ab","#962eff","#f32bf3","#e5c494","#a88e85","#a77f96","#90a4ae","#cccccc","#e0e0e0","#fafafa","#ffffff"],addColors:[]}})(jQuery);


/*
 jQuery Cookie Plugin v1.4.1
 https://github.com/carhartl/jquery-cookie

 Copyright 2006, 2014 Klaus Hartl
 Released under the MIT license
*/
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):"object"===typeof exports?module.exports=d(require("jquery")):d(jQuery)})(function(d){function p(a){a=e.json?JSON.stringify(a):String(a);return e.raw?a:encodeURIComponent(a)}function n(a,g){if(e.raw)var b=a;else a:{var c=a;0===c.indexOf('"')&&(c=c.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{c=decodeURIComponent(c.replace(l," "));b=e.json?JSON.parse(c):c;break a}catch(h){}b=void 0}return d.isFunction(g)?g(b):b}
var l=/\+/g,e=d.cookie=function(a,g,b){if(1<arguments.length&&!d.isFunction(g)){b=d.extend({},e.defaults,b);if("number"===typeof b.expires){var c=b.expires,h=b.expires=new Date;h.setMilliseconds(h.getMilliseconds()+864E5*c)}return document.cookie=[e.raw?a:encodeURIComponent(a),"=",p(g),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join("")}for(var c=a?void 0:{},h=document.cookie?document.cookie.split("; "):[],
m=0,l=h.length;m<l;m++){var f=h[m].split("=");var k=f.shift();k=e.raw?k:decodeURIComponent(k);f=f.join("=");if(a===k){c=n(f,g);break}a||void 0===(f=n(f))||(c[k]=f)}return c};e.defaults={};d.removeCookie=function(a,e){d.cookie(a,"",d.extend({},e,{expires:-1}));return!d.cookie(a)}});

//Create expiring cookie, valid across entire site:
//$.cookie('name', 'value', { expires: 7, path: '/' });

//Read cookie:
//$.cookie('name'); // => "value"
//$.cookie('nothing'); // => undefined

//Read all available cookies:
//$.cookie(); // => { "name": "value" }

/*
 * bootstrap-filestyle
 * doc: http://markusslima.github.io/bootstrap-filestyle/
 * github: https://github.com/markusslima/bootstrap-filestyle
 *
 * Copyright (c) 2017 Markus Vinicius da Silva Lima
 * Version 1.3.0
 * Licensed under the MIT license.
 */
 !function(e){"use strict";var t=0,i=function(t,i){this.options=i,this.$elementFilestyle=[],this.$element=e(t)};i.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val(""),this.$elementFilestyle.find(".badge").remove()},destroy:function(){this.$element.removeAttr("style").removeData("filestyle"),this.$elementFilestyle.remove()},disabled:function(e){return e!==!0&&e!==!1?this.options.disabled:(this.options.disabled=e,this.$element.prop("disabled",this.options.disabled),this.$elementFilestyle.find("label").prop("disabled",this.options.disabled),this.options.disabled?this.$elementFilestyle.find("label").css("opacity","0.65"):this.$elementFilestyle.find("label").css("opacity","1"),void 0)},buttonBefore:function(e){if(e===!0)this.options.buttonBefore||(this.options.buttonBefore=e,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()));else{if(e!==!1)return this.options.buttonBefore;this.options.buttonBefore&&(this.options.buttonBefore=e,this.options.input&&(this.$elementFilestyle.remove(),this.constructor(),this.pushNameFiles()))}},input:function(e){if(e===!0)this.options.input||(this.options.input=e,this.options.buttonBefore?this.$elementFilestyle.append(this.htmlInput()):this.$elementFilestyle.prepend(this.htmlInput()),this.pushNameFiles(),this.$elementFilestyle.find(".group-span-filestyle").addClass("input-group-btn"));else{if(e!==!1)return this.options.input;this.options.input&&(this.options.input=e,this.$elementFilestyle.find(":text").remove(),this.$elementFilestyle.find(".group-span-filestyle").removeClass("input-group-btn"))}},size:function(e){if(void 0===e)return this.options.size;this.options.size=e;var t=this.$elementFilestyle.find("label"),i=this.$elementFilestyle.find("input");t.removeClass("btn-lg btn-sm"),i.removeClass("form-control-lg form-control-sm"),"nr"!=this.options.size&&(t.addClass("btn-"+this.options.size),i.addClass("form-control-"+this.options.size))},placeholder:function(e){return void 0===e?this.options.placeholder:(this.options.placeholder=e,void this.$elementFilestyle.find("input").attr("placeholder",e))},text:function(e){return void 0===e?this.options.text:(this.options.text=e,void this.$elementFilestyle.find("label .text").html(this.options.text))},btnClass:function(e){return void 0===e?this.options.btnClass:(this.options.btnClass=e,void this.$elementFilestyle.find("label").attr({"class":"btn "+this.options.btnClass+" btn-"+this.options.size}))},badge:function(e){if(e===!0){this.options.badge=e;var t=this.pushNameFiles();this.$elementFilestyle.find("label").append(' <span class="badge '+this.options.badgeName+'">'+t.length+"</span>")}else{if(e!==!1)return this.options.badge;this.options.badge=e,this.$elementFilestyle.find(".badge").remove()}},badgeName:function(e){return void 0===e?this.options.badgeName:(this.options.badgeName=e,void this.$elementFilestyle.find(".badge").attr({"class":"badge "+this.options.badgeName}))},htmlIcon:function(e){return void 0!==e&&(this.options.htmlIcon=e),this.options.htmlIcon},htmlInput:function(){return this.options.input?'<input type="text" class="form-control '+("nr"==this.options.size?"":"form-control-"+this.options.size)+'" placeholder="'+this.options.placeholder+'" disabled> ':""},pushNameFiles:function(){var e="",t=[];void 0===this.$element[0].files?t[0]={name:this.$element[0]&&this.$element[0].value}:t=this.$element[0].files;for(var i=0;i<t.length;i++)e+=t[i].name.split("\\").pop()+", ";return""!==e?this.$elementFilestyle.find(":text").val(e.replace(/\, $/g,"")):this.$elementFilestyle.find(":text").val(""),t},constructor:function(){var i=this,s="",n=i.$element.attr("id"),l="";""!==n&&n||(n="filestyle-"+t,i.$element.attr({id:n}),t++),l='<span class="group-span-filestyle '+(i.options.input?"input-group-btn":"")+'"><label for="'+n+'" style="margin-bottom: 0;" class="btn '+i.options.btnClass+" "+("nr"==i.options.size?"":"btn-"+i.options.size)+'" '+(i.options.disabled||i.$element.attr("disabled")?' disabled="true"':"")+">"+i.htmlIcon()+'<span class="buttonText">'+i.options.text+"</span></label></span>",s=i.options.buttonBefore?l+i.htmlInput():i.htmlInput()+l,i.$elementFilestyle=e('<div class="bootstrap-filestyle input-group">'+s+"</div>"),i.$elementFilestyle.find(".group-span-filestyle").attr("tabindex","0").keypress(function(e){return 13===e.keyCode||32===e.charCode?(i.$elementFilestyle.find("label").click(),!1):void 0}),i.$element.css({position:"absolute",clip:"rect(0px 0px 0px 0px)"}).attr("tabindex","-1").after(i.$elementFilestyle),(i.options.disabled||i.$element.attr("disabled"))&&(i.$element.attr("disabled","true"),i.options.disabled?i.$elementFilestyle.find("label").css("opacity","0.65"):i.$elementFilestyle.find("label").css("opacity","1")),i.$element.change(function(){var e=i.pushNameFiles();i.options.badge?0==i.$elementFilestyle.find(".badge").length?i.$elementFilestyle.find("label").append(' <span class="badge '+i.options.badgeName+'">'+e.length+"</span>"):0==e.length?i.$elementFilestyle.find(".badge").remove():i.$elementFilestyle.find(".badge").html(e.length):i.$elementFilestyle.find(".badge").remove(),i.options.onChange(e)}),window.navigator.userAgent.search(/firefox/i)>-1&&i.$elementFilestyle.find("label").click(function(){return i.$element.click(),!1})}};var s=e.fn.filestyle;e.fn.filestyle=function(t,s){var n="",l=this.each(function(){if("file"===e(this).attr("type")){var l=e(this),o=l.data("filestyle"),a=e.extend({},e.fn.filestyle.defaults,t,"object"==typeof t&&t);o||(l.data("filestyle",o=new i(this,a)),o.constructor()),"string"==typeof t&&(n=o[t](s))}});return void 0!==typeof n?n:l},e.fn.filestyle.defaults={text:"Choose file",htmlIcon:"",btnClass:"btn-secondary",size:"nr",input:!0,badge:!1,badgeName:"badge-light",buttonBefore:!1,disabled:!1,placeholder:"",onChange:function(){}},e.fn.filestyle.noConflict=function(){return e.fn.filestyle=s,this},e(function(){e(".filestyle").each(function(){var t=e(this),i={input:"false"!==t.attr("data-input"),htmlIcon:t.attr("data-icon"),buttonBefore:"true"===t.attr("data-buttonBefore"),disabled:"true"===t.attr("data-disabled"),size:t.attr("data-size"),text:t.attr("data-text"),btnClass:t.attr("data-btnClass"),badge:"true"===t.attr("data-badge"),badgeName:t.attr("data-badgeName"),placeholder:t.attr("data-placeholder")};t.filestyle(i)})})}(window.jQuery);
 

function showThinker(selector) {
        $(selector).addClass("thinking");
        return false;
    }
function hideThinker(selector) {
        $(selector).removeClass("thinking");
        return false;
    }
	
function resetForm($form) {
    $form.find('input:text, input:password, input:file, select, textarea').val('');
    $form.find('input:radio, input:checkbox').prop('checked', false);
}

var getUrlParameter = function getURLParameter(name, string) {
    return decodeURI(
        (RegExp(name + '=' + '(.+?)(&|$)').exec(string) || [, null])[1]
    );
}
function isInIframe() {
    try {
        return window.location != window.parent.location;//window.self !== window.top;
    } catch (e) {
        return true;
    }
}
function getSelectedText(e) {
    text   = "",
    start  = e.selectionStart,
    finish = e.selectionEnd;
    text   = e.value.substring(start, finish);
    return text;
}

function copyToClipboard(text){

    var et = $('<textarea/>',{
       css:{ opacity: '0' }
    });
    $('body').append(et);
    $(et)[0].value = text;
    $(et).focus().select();
    document.execCommand('copy');
    $(et).remove();

}

if (!String.prototype.encodeHTML) {
  String.prototype.encodeHTML = function () {
    return this.replace(/&/g, '&amp;')
               .replace(/</g, '&lt;')
               .replace(/>/g, '&gt;')
               .replace(/"/g, '&quot;')
               .replace(/'/g, '&apos;');
  };
}
if (!String.prototype.decodeHTML) {
  String.prototype.decodeHTML = function () {
    return this.replace(/&apos;/g, "'")
               .replace(/&quot;/g, '"')
               .replace(/&gt;/g, '>')
               .replace(/&lt;/g, '<')
               .replace(/&amp;/g, '&');
  };
}
if (typeof jsmonthsShort !== 'undefined') {
var nameMDLength = jsmonthsShort.length;
for (var i = 0; i < nameMDLength; i++) {
    jsmonthsShort[i] = jsmonthsShort[i].decodeHTML();
}
var nameMDLength = jsmonthsFull.length;
for (var i = 0; i < nameMDLength; i++) {
    jsmonthsFull[i] = jsmonthsFull[i].decodeHTML();
}
var nameMDLength = jsdaysShort.length;
for (var i = 0; i < nameMDLength; i++) {
    jsdaysShort[i] = jsdaysShort[i].decodeHTML();
}
var nameMDLength = jsdaysFull.length;
for (var i = 0; i < nameMDLength; i++) {
    jsdaysFull[i] = jsdaysFull[i].decodeHTML();
}
var pickerstartday;
if(cfgweekstart>2){pickerstartday=1;}else{pickerstartday=0;}
$.extend($.fn.pickadate.defaults, {
    monthsFull: jsmonthsFull,
    monthsShort: jsmonthsShort,
    weekdaysFull: jsdaysFull,
    weekdaysShort: jsdaysShort,
    today: ljsToday,
    clear: ljsClear,
    close: ljsClose,
    firstDay: pickerstartday,
    format: 'dddd d !de mmmm !de yyyy',
    formatSubmit: 'yyyy-mm-dd'
});

$.extend($.fn.pickadate.defaults, {
    clear: ljsClear
});
}


